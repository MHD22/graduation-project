{"ast":null,"code":"import _classCallCheck from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Component}from'react';import Swal from'sweetalert2';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.checkId=function(event){event.preventDefault();var form=document.getElementById('signInForm');var user={id:form.teacherId.value,password:form.teacherPassword.value};if(user.id&&user.password){checkTheUserData(user).then(function(userData){if(isUserLoggedIn(userData)){storedUserInSession(userData);goToHomePage();}else{Swal.fire({icon:'error',title:'Oops ...',html:'<h5 class=\"text-danger font-lobster mt-2\">Email OR Password Is Wrong<br>Try again.</h5>'});}}).catch(function(e){console.log(\"error during send user data to backend within the sign in page.\");});}else{Swal.fire({icon:'warning',title:'Hmmm ..',html:'<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>'});}};_this.resetPassHandler=function(e){var token=document.getElementById('resetToken').value;var _this$state=_this.state,email=_this$state.email,newPass=_this$state.newPass,hashedToken=_this$state.hashedToken;var bodyData={email:email,newPass:newPass,token:token,hashedToken:hashedToken};var baseUrl=document.getElementById('baseUrl').defaultValue;var url=\"\".concat(baseUrl,\"/resetPass\");var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(bodyData)};fetch(url,requestOptions).then(function(res){return res.json();}).then(function(response){if(response==='done'){Swal.fire({icon:'success',title:'Success',html:'<h5 class=\"text-success font-lobster mt-2\">Password Is Changed Successfully</h5>'});_this.setState({isForgotClicked:false});_this.clearForms();}else if(response==='Token is wrong.'){Swal.fire({icon:'error',title:'Oops ...',html:'<h5 class=\"text-danger font-lobster mt-2\">Token is wrong! <br> Try again..</h5>'});}console.log(response);});};_this.showResetForm=function(){_this.setState({isForgotClicked:true});};_this.showLoginForm=function(){_this.setState({isForgotClicked:false});};_this.getAccessToken=function(e){e.preventDefault();var resetForm=document.getElementById('resetPassForm');var email=resetForm.email.value;var newPass=resetForm.newPass.value;if(email&&newPass){_this.setState({email:email,newPass:newPass});var baseUrl=document.getElementById('baseUrl').defaultValue;var url=\"\".concat(baseUrl,\"/sendToken\");var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email})};fetch(url,requestOptions).then(function(result){return result.json();}).then(function(response){if(response==='This email is not registered yet.'){Swal.fire({icon:'error',title:'Oops ...',html:\"<h5 class=\\\"text-danger font-lobster mt-2\\\">\".concat(response,\"</h5>\")});}else if(response==='error within checking the teacher existance'){Swal.fire({icon:'error',title:'Oops ...',html:\"<h5 class=\\\"text-danger font-lobster mt-2\\\">Something wrong, try again later, please.</h5>\"});}else{_this.setState({hashedToken:response,showSentToken:true});Swal.fire({title:'<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',icon:'question',iconHtml:'?',html:'<input type=\"text\" id=\"resetToken\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>'}).then(function(){_this.resetPassHandler();});}}).catch(function(e){console.log(\"error when getting the hashed token..\");});}else{Swal.fire({icon:'warning',title:'Hmmm ..',html:'<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>'});}};_this.clearForms=function(){var form=document.getElementById('signInForm');var form2=document.getElementById('resetPassForm');form.teacherId.value='';form.teacherPassword.value='';form2.email.value='';form2.newPass.value='';};_this.state={isForgotClicked:false,// showSentToken: false,\nemail:'',newPass:'',hashedToken:'',token:'',route:null};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{hidden:this.state.isForgotClicked},/*#__PURE__*/React.createElement(\"form\",{className:\"mt-3\",id:\"signInForm\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"ID Number\"),/*#__PURE__*/React.createElement(\"input\",{name:\"teacherId\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"PASSWORD\"),/*#__PURE__*/React.createElement(\"input\",{name:\"teacherPassword\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.checkId,className:\"mt4 my-button \"},\"Sign In\")),/*#__PURE__*/React.createElement(\"p\",{onClick:this.showResetForm,className:\"mt4 pointer grow \"},/*#__PURE__*/React.createElement(\"span\",{className:\"forget\"},\"Forgot Password?\"))),/*#__PURE__*/React.createElement(\"div\",{hidden:!this.state.isForgotClicked},/*#__PURE__*/React.createElement(\"form\",{className:\"mt-3\",id:\"resetPassForm\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{name:\"email\",type:\"email\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"New Password\"),/*#__PURE__*/React.createElement(\"input\",{name:\"newPass\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:this.getAccessToken,className:\"mt4 my-button \"},\"Send Token\"))),/*#__PURE__*/React.createElement(\"p\",{onClick:this.showLoginForm,className:\"mt4 pointer grow label-title \"},/*#__PURE__*/React.createElement(\"span\",{className:\"forget\"},\"login?\"))));}}]);return Login;}(Component);export default Login;//helper functions:\nfunction isUserLoggedIn(userData){if(userData.length===1){return true;}return false;}function storedUserInSession(userData){var _userData$=userData[0],firstName=_userData$.firstName,lastName=_userData$.lastName,id_number=_userData$.id_number;var storedData={firstName:firstName,lastName:lastName,id_number:id_number};sessionStorage.setItem('teacher',JSON.stringify(storedData));}function goToHomePage(){window.location.replace(\"http://localhost:3000\");}function checkTheUserData(user){var baseUrl=document.getElementById('baseUrl').defaultValue;return fetch(\"\".concat(baseUrl,\"/loginTeacher\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)}).then(function(res){return res.json();});}","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/Login.js"],"names":["React","Component","Swal","Login","checkId","event","preventDefault","form","document","getElementById","user","id","teacherId","value","password","teacherPassword","checkTheUserData","then","userData","isUserLoggedIn","storedUserInSession","goToHomePage","fire","icon","title","html","catch","e","console","log","resetPassHandler","token","state","email","newPass","hashedToken","bodyData","baseUrl","defaultValue","url","requestOptions","method","headers","body","JSON","stringify","fetch","res","json","response","setState","isForgotClicked","clearForms","showResetForm","showLoginForm","getAccessToken","resetForm","result","showSentToken","iconHtml","form2","route","length","firstName","lastName","id_number","storedData","sessionStorage","setItem","window","location","replace"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport Swal from 'sweetalert2';\n\nclass Login extends Component {\n    constructor() {\n        super();\n        this.state = {\n            isForgotClicked: false,\n            // showSentToken: false,\n            email: '',\n            newPass: '',\n            hashedToken: '',\n            token: '',\n            route: null\n        }\n    }\n\n    checkId = (event) => {\n\n        event.preventDefault();\n        const form = document.getElementById('signInForm');\n        let user = { id: form.teacherId.value, password: form.teacherPassword.value };\n\n        if (user.id && user.password) {\n            checkTheUserData(user)\n                .then(userData => {\n\n                    if (isUserLoggedIn(userData)) {\n                        storedUserInSession(userData);\n                        goToHomePage();\n                    }\n                    else {\n                        Swal.fire({\n                            icon: 'error',\n                            title: 'Oops ...',\n                            html: '<h5 class=\"text-danger font-lobster mt-2\">Email OR Password Is Wrong<br>Try again.</h5>',\n                        })\n                    }\n\n                })\n                .catch(e => { console.log(\"error during send user data to backend within the sign in page.\") });\n        }\n        else {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Hmmm ..',\n                html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>',\n            })\n        }\n\n    }\n\n    resetPassHandler = (e) => {\n        let token = document.getElementById('resetToken').value;\n        let { email, newPass, hashedToken } = this.state;\n        let bodyData = { email, newPass, token, hashedToken };\n        let baseUrl = document.getElementById('baseUrl').defaultValue;\n        let url = `${baseUrl}/resetPass`;\n        let requestOptions =\n        {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(bodyData),\n        };\n        fetch(url, requestOptions)\n            .then(res => res.json())\n            .then(response => {\n                if (response === 'done') {\n                    Swal.fire({\n                        icon: 'success',\n                        title: 'Success',\n                        html: '<h5 class=\"text-success font-lobster mt-2\">Password Is Changed Successfully</h5>',\n                    })\n                    this.setState({ isForgotClicked: false });\n                    this.clearForms();\n                }\n                else if (response === 'Token is wrong.') {\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Oops ...',\n                        html: '<h5 class=\"text-danger font-lobster mt-2\">Token is wrong! <br> Try again..</h5>',\n                    })\n                }\n\n                console.log(response);\n            })\n\n    }\n\n    showResetForm = () => {\n        this.setState({ isForgotClicked: true });\n    }\n    showLoginForm = () => {\n        this.setState({ isForgotClicked: false });\n    }\n\n    getAccessToken = (e) => {\n        e.preventDefault();\n        let resetForm = document.getElementById('resetPassForm');\n        let email = resetForm.email.value;\n        let newPass = resetForm.newPass.value;\n        if (email && newPass) {\n            this.setState({ email, newPass });\n            let baseUrl = document.getElementById('baseUrl').defaultValue;\n            let url = `${baseUrl}/sendToken`;\n            let requestOptions =\n            {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email }),\n            };\n            fetch(url, requestOptions)\n                .then(result => result.json())\n                .then(response => {\n                    if (response === 'This email is not registered yet.') {\n                        Swal.fire({\n                            icon: 'error',\n                            title: 'Oops ...',\n                            html: `<h5 class=\"text-danger font-lobster mt-2\">${response}</h5>`,\n                        })\n                    }\n                    else if (response === 'error within checking the teacher existance') {\n                        Swal.fire({\n                            icon: 'error',\n                            title: 'Oops ...',\n                            html: `<h5 class=\"text-danger font-lobster mt-2\">Something wrong, try again later, please.</h5>`,\n                        })\n                    }\n                    else {\n                        this.setState({ hashedToken: response, showSentToken: true });\n                        Swal.fire({\n                            title: '<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',\n                            icon: 'question',\n                            iconHtml: '?',\n                            html: '<input type=\"text\" id=\"resetToken\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>',\n                        }).then(() => {\n                            this.resetPassHandler();\n                        });\n\n                    }\n                })\n                .catch(e => { console.log(\"error when getting the hashed token..\") });\n        }\n        else {\n            Swal.fire({\n                icon: 'warning',\n                title: 'Hmmm ..',\n                html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>',\n            })\n        }\n\n    }\n\n    clearForms = () => {\n        let form = document.getElementById('signInForm');\n        let form2 = document.getElementById('resetPassForm');\n        form.teacherId.value = '';\n        form.teacherPassword.value = '';\n        form2.email.value = '';\n        form2.newPass.value = '';\n\n    }\n\n    render() {\n        return (\n            <>\n                <div hidden={this.state.isForgotClicked}>\n                    <form className=\"mt-3\" id='signInForm' >\n                        {/* <input name='teacherId' type=\"text\" placeholder=\"Teacher ID ..\" className=\"form-input mt-4\" required />\n                        <br />\n                        <input name='teacherPassword' type=\"password\" placeholder=\"Password..\" className=\"form-input mt-4\" required />\n                        <br />\n                        <input type=\"submit\" id='submit' onClick={this.checkId} value=\"Login\" className=\"btn btn-success btn-submit mt-4\" /> */}\n                        <label className=\"label-title \">ID Number</label>\n                        <input name='teacherId' type=\"text\" />\n\n                        <label className=\"label-title \">PASSWORD</label>\n                        <input name='teacherPassword' type=\"password\" />\n                        <button onClick={this.checkId} className=\"mt4 my-button \">Sign In</button>\n\n                    </form>\n                    <p onClick={this.showResetForm} className=\"mt4 pointer grow \"><span className=\"forget\">Forgot Password?</span></p>\n                </div>\n                <div hidden={!this.state.isForgotClicked}>\n                    {/* <h2 className=\"main-title ma3\" >Reset Password</h2> */}\n                    <form className=\"mt-3\" id='resetPassForm' >\n                        <div>\n                            <label className=\"label-title \" >Email</label>\n                            <input name='email' type=\"email\" />\n                            <label className=\"label-title \">New Password</label>\n                            <input name='newPass' type=\"password\" />\n                            <button onClick={this.getAccessToken} className=\"mt4 my-button \">Send Token</button>\n                        </div>\n                    </form>\n                    <p onClick={this.showLoginForm} className=\"mt4 pointer grow label-title \"><span className=\"forget\">login?</span></p>\n                </div>\n\n               \n            </>\n\n\n\n\n\n        );\n    }\n}\nexport default Login\n\n\n\n//helper functions:\n\n\nfunction isUserLoggedIn(userData) {\n    if (userData.length === 1) {\n        return true;\n    }\n    return false;\n}\n\nfunction storedUserInSession(userData) {\n    const { firstName, lastName, id_number } = userData[0];\n    const storedData = { firstName, lastName, id_number };\n    sessionStorage.setItem('teacher', JSON.stringify(storedData));\n}\n\nfunction goToHomePage() {\n    window.location.replace(\"http://localhost:3000\");\n}\n\nfunction checkTheUserData(user) {\n    let baseUrl = document.getElementById('baseUrl').defaultValue;\n    return fetch(`${baseUrl}/loginTeacher`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(user),\n    })\n        .then(res => res.json())\n\n}"]},"metadata":{},"sourceType":"module"}