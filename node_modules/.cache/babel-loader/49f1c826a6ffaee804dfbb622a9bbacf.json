{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/graduation-project/graduation-project/src/components/AddStudents.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\n\nclass AddStudents extends Component {\n  constructor() {\n    super();\n\n    this.addNewClass = e => {\n      let teacherID = JSON.parse(sessionStorage.getItem('teacher')).id_number;\n      let classData = {\n        teacherID,\n        className: this.props.courseName,\n        ids: this.state.addedStdID,\n        fnames: this.state.addedStdFName,\n        lnames: this.state.addedStdLName\n      };\n      fetch('http://localhost:3000/classes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(classData)\n      }).then(res => res.json()).then(this.setState({\n        title: 'Done',\n        body: 'Class Created Successfully ..',\n        show: true\n      })).catch(e => {\n        console.log(e);\n      });\n    };\n\n    this.addStudent = e => {\n      console.log(\"aaaa\");\n      let id = e.target.value;\n      let fname = e.target.getAttribute('data-fname');\n      let lname = e.target.getAttribute('data-lname');\n      let arrIDS = this.state.addedStdID;\n      let arrFN = this.state.addedStdFName;\n      let arrLN = this.state.addedStdLName;\n      let found = arrIDS.indexOf(id);\n\n      if (found === -1) {\n        arrIDS.push(id);\n        arrFN.push(fname);\n        arrLN.push(lname);\n        this.setState({\n          addedStdID: arrIDS,\n          addedStdFName: arrFN,\n          addedStdLName: arrLN\n        });\n      } else {\n        arrIDS.splice(found, 1);\n        arrFN.splice(found, 1);\n        arrLN.splice(found, 1);\n        this.setState({\n          addedStdID: arrIDS,\n          addedStdFName: arrFN,\n          addedStdLName: arrLN\n        });\n        document.getElementById(id + 'label').style.background = \"#343a40\";\n      }\n\n      console.log(this.state.addedStdID, this.state.addedStdFName, this.state.addedStdLName);\n    };\n\n    this.handleFilter = event => {\n      this.setState({\n        search: event.target.value\n      });\n    };\n\n    this.editStudents = () => {\n      console.log(\"added..\");\n      let {\n        addedStdID,\n        addedStdFName,\n        addedStdLName\n      } = this.state;\n      let editArray = addedStdID.map((std, ind) => {\n        return {\n          id: std,\n          name: `${addedStdFName[ind]} ${addedStdLName[ind]}`\n        };\n      });\n      this.props.onAddStd(editArray);\n    };\n\n    this.handleClose = e => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.done = e => {\n      this.setState({\n        route: '/show'\n      });\n    };\n\n    this.state = {\n      students: [],\n      addedStdID: [],\n      addedStdFName: [],\n      addedStdLName: [],\n      search: '',\n      show: false,\n      title: '',\n      body: '',\n      route: null,\n      courseName: ''\n    };\n  }\n\n  componentDidMount() {\n    let url = 'http://localhost:3000/students';\n    fetch(url).then(response => response.json()).then(data => {\n      this.setState({\n        students: data\n      });\n    });\n    console.log(this.state);\n  }\n\n  render() {\n    let filteredArray = this.state.students.filter(std => {\n      return `${std.fname} ${std.lname} ${std.id}`.toLowerCase().includes(this.state.search.toLowerCase());\n    });\n\n    if (this.state.addedStdID.length !== 0) {\n      this.state.addedStdID.forEach(id => {\n        let name = document.getElementById(id + 'label');\n\n        if (name !== null) {\n          name.style.background = \"#004d1a\";\n        }\n      });\n    }\n\n    filteredArray = filteredArray.map((std, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: std.id,\n        id: std.id + 'label',\n        key: std.id,\n        \"data-name\": std.fname,\n        className: \"student\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 20\n        }\n      }, std.fname + ' ' + std.lname + ' | ' + std.id, \" \", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        \"data-fname\": std.fname,\n        \"data-lname\": std.lname,\n        value: std.id,\n        id: std.id,\n        onChange: this.addStudent,\n        className: \"check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 168\n        }\n      }));\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.state.route ? /*#__PURE__*/React.createElement(Redirect, {\n      to: this.state.route,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 36\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"main-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, \"Add Student\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"search\",\n      onChange: this.handleFilter,\n      type: \"search\",\n      placeholder: \"search on students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cont-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"students p-3\",\n      id: \"students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, filteredArray))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"submit\",\n      className: \"btn f3 grow btn-success btn-submit\",\n      onClick: this.props.createNew ? this.addNewClass : this.editStudents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, \"Done\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 36\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleClose,\n      backdrop: \"static\",\n      keyboard: false,\n      size: \"lg\",\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      className: \"text-info text-center p-5 font-lobster\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, this.state.title), /*#__PURE__*/React.createElement(Modal.Body, {\n      className: \"text-center  font-acme\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, this.state.body), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      className: \"text-center grow\",\n      onClick: this.done,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, \"Done\"))));\n  }\n\n}\n\nexport default AddStudents;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/AddStudents.js"],"names":["React","Component","Button","Modal","Redirect","AddStudents","constructor","addNewClass","e","teacherID","JSON","parse","sessionStorage","getItem","id_number","classData","className","props","courseName","ids","state","addedStdID","fnames","addedStdFName","lnames","addedStdLName","fetch","method","headers","body","stringify","then","res","json","setState","title","show","catch","console","log","addStudent","id","target","value","fname","getAttribute","lname","arrIDS","arrFN","arrLN","found","indexOf","push","splice","document","getElementById","style","background","handleFilter","event","search","editStudents","editArray","map","std","ind","name","onAddStd","handleClose","done","route","students","componentDidMount","url","response","data","render","filteredArray","filter","toLowerCase","includes","length","forEach","i","createNew"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nclass AddStudents extends Component {\n    constructor() {\n        super();\n        this.state = {\n            students: [],\n            addedStdID: [],\n            addedStdFName: [],\n            addedStdLName: [],\n            search: '',\n            show: false,\n            title: '',\n            body: '',\n            route: null,\n            courseName:''\n        }\n    }\n    componentDidMount() {\n        let url = 'http://localhost:3000/students';\n        fetch(url)\n            .then(response => response.json())\n            .then(data => {\n                this.setState({ students: data });\n            })\n\n            console.log(this.state)\n\n    }\n\n    \n\n    addNewClass = (e) => {\n        let teacherID = JSON.parse(sessionStorage.getItem('teacher')).id_number;\n        let classData = {\n            teacherID,\n            className: this.props.courseName,\n            ids: this.state.addedStdID,\n            fnames: this.state.addedStdFName,\n            lnames: this.state.addedStdLName\n        };\n\n        fetch('http://localhost:3000/classes', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(classData),\n        })\n            .then(res => res.json())\n            .then(\n                this.setState({\n                    title: 'Done',\n                    body: 'Class Created Successfully ..',\n                    show: true\n                })\n            ).catch(e => { console.log(e) });\n    }\n\n    addStudent = (e) => {\n        console.log(\"aaaa\")\n        let id = e.target.value;\n        let fname = e.target.getAttribute('data-fname');\n        let lname = e.target.getAttribute('data-lname');\n        let arrIDS = this.state.addedStdID;\n        let arrFN = this.state.addedStdFName;\n        let arrLN = this.state.addedStdLName;\n        let found = arrIDS.indexOf(id);\n        if (found === -1) {\n            arrIDS.push(id);\n            arrFN.push(fname);\n            arrLN.push(lname);\n            \n            this.setState({\n                addedStdID: arrIDS,\n                addedStdFName: arrFN,\n                addedStdLName: arrLN,\n            });\n        }\n        else {\n            arrIDS.splice(found, 1);\n            arrFN.splice(found, 1);\n            arrLN.splice(found, 1);\n            this.setState({\n                addedStdID: arrIDS,\n                addedStdFName: arrFN,\n                addedStdLName: arrLN\n            });\n\n            document.getElementById(id + 'label').style.background = \"#343a40\";\n        }\n        console.log(this.state.addedStdID, this.state.addedStdFName, this.state.addedStdLName);\n    }\n\n    handleFilter = (event) => {\n        this.setState({ search: event.target.value });\n    }\n    editStudents = () => {\n        console.log(\"added..\")\n        let {addedStdID,addedStdFName,addedStdLName}=this.state;\n        let editArray = addedStdID.map((std,ind)=>{\n          return { id: std, name: `${addedStdFName[ind]} ${addedStdLName[ind]}`};\n        })\n        this.props.onAddStd(editArray);\n    }\n\n    handleClose = (e) => {\n        this.setState({\n            show: false\n        });\n    }\n\n    done = (e) => {\n        this.setState({\n            route: '/show'\n        });\n    }\n\n    render() {\n\n        let filteredArray = this.state.students.filter((std) => {\n            return (`${std.fname} ${std.lname} ${std.id}`).toLowerCase().includes(this.state.search.toLowerCase());\n        });\n        if (this.state.addedStdID.length !== 0) {\n\n            this.state.addedStdID.forEach((id) => {\n                let name = document.getElementById(id + 'label');\n                if (name !== null) {\n                    name.style.background = \"#004d1a\";\n                }\n\n            })\n        }\n        filteredArray = filteredArray.map((std, i) => {\n            return <label htmlFor={std.id} id={std.id + 'label'} key={std.id} data-name={std.fname} className=\"student\">{std.fname + ' ' + std.lname + ' | ' + std.id} <input type=\"checkbox\" data-fname={std.fname} data-lname={std.lname} value={std.id} id={std.id} onChange={this.addStudent} className=\"check\" /></label>\n        })\n\n\n\n        return (\n            <>\n                {this.state.route? <Redirect to={this.state.route}/> : null}\n                <h1 className=\"main-title\">Add Student</h1>\n                <div className=\"container-students\">\n                    <input className=\"search\" onChange={this.handleFilter} type=\"search\" placeholder=\"search on students\" />\n                    <div className=\"cont-cont\">\n                        <div className=\"students p-3\" id=\"students\">\n                            {filteredArray}\n                        </div>\n                    </div>\n                </div>\n                <br />\n                <button id='submit' className=\"btn f3 grow btn-success btn-submit\"\n                    onClick={\n                        this.props.createNew?\n                            this.addNewClass\n                            :\n                            this.editStudents\n                    }>Done</button><br />\n\n                <Modal\n                    show={this.state.show}\n                    onHide={this.handleClose}\n                    backdrop=\"static\"\n                    keyboard={false}\n                    size=\"lg\"\n                    centered\n                >\n\n                    <Modal.Title className=\"text-info text-center p-5 font-lobster\">{this.state.title}</Modal.Title>\n                    <Modal.Body className=\"text-center  font-acme\">{this.state.body}</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"primary\" className=\"text-center grow\" onClick={this.done}>Done</Button>\n                    </Modal.Footer>\n                </Modal>\n            </>\n        )\n    }\n}\nexport default AddStudents;"]},"metadata":{},"sourceType":"module"}