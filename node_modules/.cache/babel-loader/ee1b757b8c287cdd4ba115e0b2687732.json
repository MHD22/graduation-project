{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/graduation-project/graduation-project/src/components/Login.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport Swal from 'sweetalert2';\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    this.checkId = event => {\n      event.preventDefault();\n      const form = document.getElementById('signInForm');\n      let user = {\n        id: form.teacherId.value,\n        password: form.teacherPassword.value\n      };\n\n      if (user.id && user.password) {\n        checkTheUserData(user).then(userData => {\n          if (isUserLoggedIn(userData)) {\n            storedUserInSession(userData);\n            goToHomePage();\n          } else {\n            Swal.fire({\n              icon: 'error',\n              title: 'Oops ...',\n              html: '<h5 class=\"text-danger font-lobster mt-2\">Email OR Password Is Wrong<br>Try again.</h5>'\n            });\n          }\n        }).catch(e => {\n          console.log(\"error during send user data to backend within the sign in page.\");\n        });\n      } else {\n        Swal.fire({\n          icon: 'warning',\n          title: 'Hmmm ..',\n          html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>'\n        });\n      }\n    };\n\n    this.resetPassHandler = e => {\n      let token = document.getElementById('resetToken').value;\n      let {\n        email,\n        newPass,\n        hashedToken\n      } = this.state;\n      let bodyData = {\n        email,\n        newPass,\n        token,\n        hashedToken\n      };\n      let baseUrl = document.getElementById('baseUrl').defaultValue;\n      let url = `${baseUrl}/resetPass`;\n      let requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bodyData)\n      };\n      fetch(url, requestOptions).then(res => res.json()).then(response => {\n        if (response === 'done') {\n          Swal.fire({\n            icon: 'success',\n            title: 'Success',\n            html: '<h5 class=\"text-success font-lobster mt-2\">Password Is Changed Successfully</h5>'\n          });\n          this.setState({\n            isForgotClicked: false\n          });\n          this.clearForms();\n        } else if (response === 'Token is wrong.') {\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops ...',\n            html: '<h5 class=\"text-danger font-lobster mt-2\">Token is wrong! <br> Try again..</h5>'\n          });\n        }\n\n        console.log(response);\n      });\n    };\n\n    this.showResetForm = () => {\n      this.setState({\n        isForgotClicked: true\n      });\n    };\n\n    this.getAccessToken = e => {\n      e.preventDefault();\n      let resetForm = document.getElementById('resetPassForm');\n      let email = resetForm.email.value;\n      let newPass = resetForm.newPass.value;\n\n      if (email && newPass) {\n        this.setState({\n          email,\n          newPass\n        });\n        let baseUrl = document.getElementById('baseUrl').defaultValue;\n        let url = `${baseUrl}/sendToken`;\n        let requestOptions = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email\n          })\n        };\n        fetch(url, requestOptions).then(result => result.json()).then(response => {\n          if (response === 'This email is not registered yet.') {\n            Swal.fire({\n              icon: 'error',\n              title: 'Oops ...',\n              html: `<h5 class=\"text-danger font-lobster mt-2\">${response}</h5>`\n            });\n          } else if (response === 'error within checking the teacher existance') {\n            Swal.fire({\n              icon: 'error',\n              title: 'Oops ...',\n              html: `<h5 class=\"text-danger font-lobster mt-2\">Something wrong, try again later, please.</h5>`\n            });\n          } else {\n            this.setState({\n              hashedToken: response,\n              showSentToken: true\n            });\n            Swal.fire({\n              title: '<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',\n              icon: 'question',\n              iconHtml: '?',\n              html: '<input type=\"text\" id=\"resetToken\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>'\n            }).then(() => {\n              this.resetPassHandler();\n            });\n          }\n        }).catch(e => {\n          console.log(\"error when getting the hashed token..\");\n        });\n      } else {\n        Swal.fire({\n          icon: 'warning',\n          title: 'Hmmm ..',\n          html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>'\n        });\n      }\n    };\n\n    this.clearForms = () => {\n      let form = document.getElementById('signInForm');\n      let form2 = document.getElementById('resetPassForm');\n      form.teacherId.value = '';\n      form.teacherPassword.value = '';\n      form2.email.value = '';\n      form2.newPass.value = '';\n    };\n\n    this.state = {\n      isForgotClicked: false,\n      // showSentToken: false,\n      email: '',\n      newPass: '',\n      hashedToken: '',\n      token: '',\n      route: null\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      hidden: this.state.isForgotClicked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"main-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, \"Login Page\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"mt-3\",\n      id: \"signInForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"teacherId\",\n      type: \"text\",\n      placeholder: \"Teacher ID ..\",\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"teacherPassword\",\n      type: \"password\",\n      placeholder: \"Password..\",\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      id: \"submit\",\n      onClick: this.checkId,\n      value: \"Login\",\n      className: \"btn btn-success btn-submit mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"f6 b i red pointer underline ma3\",\n      onClick: this.showResetForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, \"Forgot Password?\")), /*#__PURE__*/React.createElement(\"div\", {\n      hidden: !this.state.isForgotClicked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"main-title ma3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, \"Reset Password\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"mt-3\",\n      id: \"resetPassForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      placeholder: \"Email..\",\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"newPass\",\n      type: \"password\",\n      placeholder: \"Your New Password\",\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      onClick: this.getAccessToken,\n      value: \"Send Token\",\n      className: \"btn btn-success btn-submit mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, \"USERNAME\"), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 37\n      }\n    }, \"PASSWORD\"), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"\",\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"mt4 my-button \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 37\n      }\n    }, \"Sign In\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mt4 pointer grow \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"forget\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 70\n      }\n    }, \"Forgot password?\")));\n  }\n\n}\n\nexport default Login; //helper functions:\n\nfunction isUserLoggedIn(userData) {\n  if (userData.length === 1) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction storedUserInSession(userData) {\n  const {\n    firstName,\n    lastName,\n    id_number\n  } = userData[0];\n  const storedData = {\n    firstName,\n    lastName,\n    id_number\n  };\n  sessionStorage.setItem('teacher', JSON.stringify(storedData));\n}\n\nfunction goToHomePage() {\n  window.location.replace(\"http://localhost:3000\");\n}\n\nfunction checkTheUserData(user) {\n  let baseUrl = document.getElementById('baseUrl').defaultValue;\n  return fetch(`${baseUrl}/loginTeacher`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(res => res.json());\n}","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/Login.js"],"names":["React","Component","Swal","Login","constructor","checkId","event","preventDefault","form","document","getElementById","user","id","teacherId","value","password","teacherPassword","checkTheUserData","then","userData","isUserLoggedIn","storedUserInSession","goToHomePage","fire","icon","title","html","catch","e","console","log","resetPassHandler","token","email","newPass","hashedToken","state","bodyData","baseUrl","defaultValue","url","requestOptions","method","headers","body","JSON","stringify","fetch","res","json","response","setState","isForgotClicked","clearForms","showResetForm","getAccessToken","resetForm","result","showSentToken","iconHtml","form2","route","render","length","firstName","lastName","id_number","storedData","sessionStorage","setItem","window","location","replace"],"mappings":"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","sourcesContent":["import React from 'react' ;\nimport { Component } from 'react';\nimport Swal from 'sweetalert2';\n\nclass Login extends Component{\n    constructor(){\n        super();\n        this.state = {\n            isForgotClicked: false,\n            // showSentToken: false,\n            email:'',\n            newPass:'',\n            hashedToken:'',\n            token:'',\n            route:null\n        }\n    }\n\n    checkId=(event)=>{\n\n        event.preventDefault();\n        const form = document.getElementById('signInForm');\n        let user= {id: form.teacherId.value , password:form.teacherPassword.value };\n        \n        if(user.id && user.password){\n            checkTheUserData(user)\n            .then(userData=>{\n  \n              if(isUserLoggedIn(userData)){\n                  storedUserInSession(userData);\n                  goToHomePage();   \n              }\n              else{\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Oops ...',\n                    html: '<h5 class=\"text-danger font-lobster mt-2\">Email OR Password Is Wrong<br>Try again.</h5>',\n                })\n              }\n  \n          })\n          .catch(e=>{console.log(\"error during send user data to backend within the sign in page.\")});    \n        }\n        else{\n            Swal.fire({\n                icon: 'warning',\n                title: 'Hmmm ..',\n                html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>',\n            })\n        }\n\n    }\n\n    resetPassHandler = (e)=>{\n        let token = document.getElementById('resetToken').value;\n        let {email, newPass, hashedToken} = this.state;\n        let bodyData={email, newPass, token, hashedToken};\n        let baseUrl= document.getElementById('baseUrl').defaultValue;\n        let url =`${baseUrl}/resetPass`;\n        let requestOptions = \n        {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(bodyData),\n        };\n        fetch(url,requestOptions)\n        .then(res=>res.json())\n        .then(response=>{\n            if(response === 'done'){\n                Swal.fire({\n                    icon: 'success',\n                    title: 'Success',\n                    html: '<h5 class=\"text-success font-lobster mt-2\">Password Is Changed Successfully</h5>',\n                })\n                this.setState({isForgotClicked:false});\n                this.clearForms();\n            }\n            else if(response === 'Token is wrong.'){\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Oops ...',\n                    html: '<h5 class=\"text-danger font-lobster mt-2\">Token is wrong! <br> Try again..</h5>',\n                })\n            }\n\n            console.log(response);\n        })\n        \n    }\n\n    showResetForm = ()=>{\n        this.setState({isForgotClicked:true});\n    }\n\n    getAccessToken=(e)=>{\n        e.preventDefault();\n        let resetForm = document.getElementById('resetPassForm');\n        let email = resetForm.email.value;\n        let newPass = resetForm.newPass.value;\n        if(email && newPass){\n            this.setState({email,newPass});\n            let baseUrl= document.getElementById('baseUrl').defaultValue;\n            let url =`${baseUrl}/sendToken`;\n            let requestOptions = \n            {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email }),\n            };\n            fetch(url,requestOptions)\n            .then(result=>result.json())\n            .then(response=>{\n                if(response === 'This email is not registered yet.'){\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Oops ...',\n                        html: `<h5 class=\"text-danger font-lobster mt-2\">${response}</h5>`,\n                    })\n                }\n                else if(response === 'error within checking the teacher existance'){\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Oops ...',\n                        html: `<h5 class=\"text-danger font-lobster mt-2\">Something wrong, try again later, please.</h5>`,\n                    })\n                }\n                else {\n                    this.setState({hashedToken:response, showSentToken:true});\n                    Swal.fire({\n                        title: '<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',\n                        icon: 'question',\n                        iconHtml: '?',\n                        html: '<input type=\"text\" id=\"resetToken\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>',\n                    }).then(() => {\n                        this.resetPassHandler();\n                    });\n\n                }\n            })\n            .catch(e=>{console.log(\"error when getting the hashed token..\")});\n        }\n        else{\n            Swal.fire({\n                icon: 'warning',\n                title: 'Hmmm ..',\n                html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>',\n            })\n        }\n        \n    }\n\n    clearForms=()=>{\n       let form = document.getElementById('signInForm');\n       let form2 = document.getElementById('resetPassForm');\n       form.teacherId.value='';\n       form.teacherPassword.value='';\n       form2.email.value='';\n       form2.newPass.value='';\n\n    }\n\n    render() {\n        return(\n            <>\n            <div hidden={this.state.isForgotClicked}>\n                <h1 className=\"main-title\">Login Page</h1>\n                <form className=\"mt-3\" id='signInForm' >\n                    <input name='teacherId' type=\"text\" placeholder=\"Teacher ID ..\" className=\"form-input mt-4\" required/>\n                    <br/>\n                    <input name='teacherPassword' type=\"password\" placeholder=\"Password..\" className=\"form-input mt-4\" required/>\n                    <br />\n                    <input type=\"submit\" id='submit' onClick={this.checkId} value=\"Login\" className=\"btn btn-success btn-submit mt-4\"/>\n                </form>\n                <p className=\"f6 b i red pointer underline ma3\" onClick={this.showResetForm} >Forgot Password?</p>\n            </div>\n            <div hidden={! this.state.isForgotClicked}>\n                <h2 className=\"main-title ma3\" >Reset Password</h2>\n                <form  className=\"mt-3\" id='resetPassForm' >\n                    <div>\n                        <input name='email' type=\"email\" placeholder=\"Email..\" className=\"form-input mt-4\" required/>\n                        <br/>\n                        <input name='newPass' type=\"password\" placeholder=\"Your New Password\" className=\"form-input mt-4\" required/>\n                        <br/>\n                        <input type=\"submit\"  onClick={this.getAccessToken} value=\"Send Token\" className=\"btn btn-success btn-submit mt-4\"/>\n                    </div>\n                </form> \n            </div>\n\n\n\n\n\n            <label>USERNAME</label>\n                                    <input placeholder=\"\" type=\"text\" />\n\n                                    <label>PASSWORD</label>\n                                    <input placeholder=\"\" type=\"password\" />\n                                    <button className=\"mt4 my-button \">Sign In</button>\n\n\n                                    <p className=\"mt4 pointer grow \"><span className=\"forget\">Forgot password?</span></p>\n            </>\n\n            \n\n\n\n        );\n    }\n}\nexport default Login\n\n\n\n//helper functions:\n\n\nfunction isUserLoggedIn (userData){\n    if(userData.length===1){\n        return true;\n    }\n    return false;\n}\n\nfunction storedUserInSession(userData){\n    const {firstName,lastName,id_number} = userData[0];\n    const storedData = {firstName,lastName,id_number};\n    sessionStorage.setItem('teacher',JSON.stringify(storedData));\n}\n\nfunction goToHomePage(){\n    window.location.replace(\"http://localhost:3000\");\n}\n\nfunction checkTheUserData(user){\n    let baseUrl= document.getElementById('baseUrl').defaultValue;\n    return fetch(`${baseUrl}/loginTeacher`,{\n            method: 'POST',\n            headers: {\n            'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(user),\n    })\n    .then(res => res.json())\n\n}"]},"metadata":{},"sourceType":"module"}