{"ast":null,"code":"import _classCallCheck from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import Swal from'sweetalert2';import'../css/CreateClass.css';var AddStudents=/*#__PURE__*/function(_Component){_inherits(AddStudents,_Component);var _super=_createSuper(AddStudents);function AddStudents(){var _this;_classCallCheck(this,AddStudents);_this=_super.call(this);_this.opensweetalert=function(){Swal.fire({title:'Success',html:'<h5 class=\"text-success\">Class Created Successfully !</h5>',type:'success',icon:'success'});_this.done();};_this.addNewClass=function(e){var teacherID=JSON.parse(sessionStorage.getItem('teacher')).id_number;var classData={teacherID:teacherID,className:_this.props.courseName,ids:_this.state.addedStdID,fnames:_this.state.addedStdFName,lnames:_this.state.addedStdLName};var baseUrl=document.getElementById('baseUrl').defaultValue;fetch(\"\".concat(baseUrl,\"/classes\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(classData)}).then(function(res){return res.json();}).then(console.log).then(_this.opensweetalert()).catch(function(e){console.log(e);});};_this.addStudent=function(e){console.log(\"aaaa\");var id=e.target.value;var fname=e.target.getAttribute('data-fname');var lname=e.target.getAttribute('data-lname');var arrIDS=_this.state.addedStdID;var arrFN=_this.state.addedStdFName;var arrLN=_this.state.addedStdLName;var found=arrIDS.indexOf(id);if(found===-1){arrIDS.push(id);arrFN.push(fname);arrLN.push(lname);_this.setState({addedStdID:arrIDS,addedStdFName:arrFN,addedStdLName:arrLN});}else{arrIDS.splice(found,1);arrFN.splice(found,1);arrLN.splice(found,1);_this.setState({addedStdID:arrIDS,addedStdFName:arrFN,addedStdLName:arrLN});document.getElementById(id+'label').style.background=\"#343a400a \";}console.log(_this.state.addedStdID,_this.state.addedStdFName,_this.state.addedStdLName);};_this.handleFilter=function(event){_this.setState({search:event.target.value});};_this.editStudents=function(){console.log(\"added..\");var _this$state=_this.state,addedStdID=_this$state.addedStdID,addedStdFName=_this$state.addedStdFName,addedStdLName=_this$state.addedStdLName;var editArray=addedStdID.map(function(std,ind){return{id:std,name:\"\".concat(addedStdFName[ind],\" \").concat(addedStdLName[ind])};});_this.props.onAddStd(editArray);};_this.handleClose=function(e){_this.setState({show:false});};_this.done=function(e){_this.setState({route:'/show'});};_this.state={students:[],addedStdID:[],addedStdFName:[],addedStdLName:[],search:'',show:false,title:'',body:'',route:null,courseName:''};return _this;}_createClass(AddStudents,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var baseUrl=document.getElementById('baseUrl').defaultValue;var url=\"\".concat(baseUrl,\"/students\");fetch(url).then(function(response){return response.json();}).then(function(data){_this2.setState({students:data});});console.log(this.state);}},{key:\"render\",value:function render(){var _this3=this;var filteredArray=this.state.students.filter(function(std){return\"\".concat(std.fname,\" \").concat(std.lname,\" \").concat(std.id).toLowerCase().includes(_this3.state.search.toLowerCase());});if(this.state.addedStdID.length!==0){this.state.addedStdID.forEach(function(id){var name=document.getElementById(id+'label');if(name!==null){name.style.background='#178326a2';}});}filteredArray=filteredArray.map(function(std,i){return/*#__PURE__*/React.createElement(\"label\",{htmlFor:std.id,id:std.id+'label',key:std.id,\"data-name\":std.fname,className:\"grow student\"},std.fname+' '+std.lname+' | '+std.id,\" \",/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",\"data-fname\":std.fname,\"data-lname\":std.lname,value:std.id,id:std.id,onChange:_this3.addStudent,className:\"check\"}));});return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.route?/*#__PURE__*/React.createElement(Redirect,{to:this.state.route}):null,/*#__PURE__*/React.createElement(\"h1\",{className:\"main-title mt5\"},\"Add Students\"),/*#__PURE__*/React.createElement(\"div\",{className:\"container-students\"},/*#__PURE__*/React.createElement(\"input\",{onChange:this.handleFilter,type:\"search\",placeholder:\"search on students\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"cont-cont\"},/*#__PURE__*/React.createElement(\"div\",{className:\"students p-3\",id:\"students\"},filteredArray))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{id:\"submit\",className:\"my-button\",onClick:this.props.createNew?this.addNewClass:this.editStudents},\"Done\"),/*#__PURE__*/React.createElement(\"br\",null));}}]);return AddStudents;}(Component);export default AddStudents;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/AddStudents.js"],"names":["React","Component","Redirect","Swal","AddStudents","opensweetalert","fire","title","html","type","icon","done","addNewClass","e","teacherID","JSON","parse","sessionStorage","getItem","id_number","classData","className","props","courseName","ids","state","addedStdID","fnames","addedStdFName","lnames","addedStdLName","baseUrl","document","getElementById","defaultValue","fetch","method","headers","body","stringify","then","res","json","console","log","catch","addStudent","id","target","value","fname","getAttribute","lname","arrIDS","arrFN","arrLN","found","indexOf","push","setState","splice","style","background","handleFilter","event","search","editStudents","editArray","map","std","ind","name","onAddStd","handleClose","show","route","students","url","response","data","filteredArray","filter","toLowerCase","includes","length","forEach","i","createNew"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Swal from 'sweetalert2' ;\nimport '../css/CreateClass.css'\n\nclass AddStudents extends Component {\n    constructor() {\n        super();\n        this.state = {\n            students: [],\n            addedStdID: [],\n            addedStdFName: [],\n            addedStdLName: [],\n            search: '',\n            show: false,\n            title: '',\n            body: '',\n            route: null,\n            courseName: ''\n        }\n    }\n    componentDidMount() {\n        let baseUrl= document.getElementById('baseUrl').defaultValue;\n        let url = `${baseUrl}/students`;\n        fetch(url)\n            .then(response => response.json())\n            .then(data => {\n                this.setState({ students: data });\n            })\n\n        console.log(this.state)\n    }\n\n    opensweetalert = () => {\n        Swal.fire({\n        title: 'Success',\n        html: '<h5 class=\"text-success\">Class Created Successfully !</h5>',\n        type: 'success',\n        icon: 'success'\n        })\n        this.done() ;\n    }\n\n    addNewClass = (e) => {\n        let teacherID = JSON.parse(sessionStorage.getItem('teacher')).id_number;\n        let classData = {\n            teacherID,\n            className: this.props.courseName,\n            ids: this.state.addedStdID,\n            fnames: this.state.addedStdFName,\n            lnames: this.state.addedStdLName\n        };\n        let baseUrl= document.getElementById('baseUrl').defaultValue;\n        fetch(`${baseUrl}/classes`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(classData),\n        })\n            .then(res => res.json())\n            .then(console.log)\n            .then(\n                this.opensweetalert() \n            )\n            .catch(\n                e => { console.log(e) }\n            );\n    }\n\n    addStudent = (e) => {\n        console.log(\"aaaa\")\n        let id = e.target.value;\n        let fname = e.target.getAttribute('data-fname');\n        let lname = e.target.getAttribute('data-lname');\n        let arrIDS = this.state.addedStdID;\n        let arrFN = this.state.addedStdFName;\n        let arrLN = this.state.addedStdLName;\n        let found = arrIDS.indexOf(id);\n        if (found === -1) {\n            arrIDS.push(id);\n            arrFN.push(fname);\n            arrLN.push(lname);\n\n            this.setState({\n                addedStdID: arrIDS,\n                addedStdFName: arrFN,\n                addedStdLName: arrLN,\n            });\n        }\n        else {\n            arrIDS.splice(found, 1);\n            arrFN.splice(found, 1);\n            arrLN.splice(found, 1);\n            this.setState({\n                addedStdID: arrIDS,\n                addedStdFName: arrFN,\n                addedStdLName: arrLN\n            });\n\n            document.getElementById(id + 'label').style.background = \"#343a400a \";\n        }\n        console.log(this.state.addedStdID, this.state.addedStdFName, this.state.addedStdLName);\n    }\n\n    handleFilter = (event) => {\n        this.setState({ search: event.target.value });\n    }\n    editStudents = () => {\n        console.log(\"added..\")\n        let { addedStdID, addedStdFName, addedStdLName } = this.state;\n        let editArray = addedStdID.map((std, ind) => {\n            return { id: std, name: `${addedStdFName[ind]} ${addedStdLName[ind]}` };\n        })\n        this.props.onAddStd(editArray);\n    }\n\n    handleClose = (e) => {\n        this.setState({\n            show: false\n        });\n    }\n\n    done = (e) => {\n        this.setState({\n            route: '/show'\n        });\n    }\n\n    render() {\n\n        let filteredArray = this.state.students.filter((std) => {\n            return (`${std.fname} ${std.lname} ${std.id}`).toLowerCase().includes(this.state.search.toLowerCase());\n        });\n        if (this.state.addedStdID.length !== 0) {\n\n            this.state.addedStdID.forEach((id) => {\n                let name = document.getElementById(id + 'label');\n                if (name !== null) {\n                    name.style.background =  '#178326a2';\n                }\n\n            })\n        }\n        filteredArray = filteredArray.map((std, i) => {\n            return <label htmlFor={std.id} id={std.id + 'label'} key={std.id} data-name={std.fname} className=\"grow student\">{std.fname + ' ' + std.lname + ' | ' + std.id} <input type=\"checkbox\" data-fname={std.fname} data-lname={std.lname} value={std.id} id={std.id} onChange={this.addStudent} className=\"check\" /></label>\n        })\n\n\n\n        return (\n            <>\n                {this.state.route ? <Redirect to={this.state.route} /> : null}\n                <h1 className=\"main-title mt5\">Add Students</h1>\n                <div className=\"container-students\">\n                <input  onChange={this.handleFilter} type=\"search\"  placeholder='search on students' />\n                    <div className=\"cont-cont\">\n                        <div className=\"students p-3\" id=\"students\">\n                            {filteredArray}\n                        </div>\n                    </div>\n                </div>\n                <br />\n                <button id='submit' className=\"my-button\"\n                    onClick={\n                        this.props.createNew ?\n                            this.addNewClass\n                            :\n                            this.editStudents\n                    }>Done</button><br />\n            </>\n        )\n    }\n}\nexport default AddStudents;"]},"metadata":{},"sourceType":"module"}