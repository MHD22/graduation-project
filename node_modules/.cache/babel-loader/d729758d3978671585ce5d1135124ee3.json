{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/graduation-project/graduation-project/src/components/History.js\";\nimport React, { Component } from 'react';\nimport Details from './Details';\nimport { Redirect } from 'react-router-dom';\nimport '../css/table.css';\nimport '../css/myClasses.css';\n\nclass History extends Component {\n  constructor() {\n    super();\n\n    this.renderTable = () => {\n      let historyData = this.state.history;\n      let rows = historyData.map((history, ind) => {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: ind,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          className: \"date\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }\n        }, history.date), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"shadow grow my-button detailsBtn\",\n          \"hover-data\": \"Show Details\",\n          onClick: () => {\n            this.showDitails(history._id);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          class: \"f4 btn-icon fas fa-question\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 154\n          }\n        }))));\n      });\n      return rows;\n    };\n\n    this.showDitails = classID => {\n      let history = this.state.history;\n      history.forEach(hist => {\n        if (classID === hist._id) {\n          this.setState({\n            students: hist.students,\n            imgs: hist.images,\n            date: hist.date,\n            showDitails: true\n          });\n        }\n      });\n    };\n\n    this.back = () => {\n      this.props.onChangeRoute('/show/classData', 0);\n    };\n\n    this.state = {\n      history: [],\n      students: [],\n      allStudents: [],\n      imgs: [],\n      date: '',\n      showDitails: false,\n      route: null\n    };\n  }\n\n  componentDidMount() {\n    let baseUrl = document.getElementById('baseUrl').defaultValue;\n    let url = `${baseUrl}/classHistory/${this.props.selected_class}`;\n    fetch(url).then(response => response.json()).then(classData => {\n      let allStudents = classData.students.map(std => {\n        return {\n          id: std.id_number,\n          name: std.firstName + ' ' + std.lastName\n        };\n      });\n      this.setState({\n        history: classData.history,\n        allStudents: allStudents\n      });\n    }).catch(e => {\n      console.log(\"error while getting history data \\n\", e);\n    });\n  }\n\n  render() {\n    let rows = this.renderTable();\n    let {\n      students,\n      allStudents,\n      imgs,\n      date\n    } = this.state;\n    let className = this.props.selected_class;\n    let historyData = {\n      students,\n      allStudents,\n      imgs,\n      date,\n      className\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.state.route ? /*#__PURE__*/React.createElement(Redirect, {\n      exact: true,\n      to: this.state.route,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 37\n      }\n    }) : null, this.state.showDitails && /*#__PURE__*/React.createElement(Details, {\n      historyData: historyData,\n      onChangeRoute: this.props.onChangeRoute,\n      backToHistory: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 45\n      }\n    }), !this.state.showDitails && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"history\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jsBack\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      \"hover-data\": \"Back\",\n      onClick: this.back,\n      style: {},\n      className: \"red-btn my-button \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"btn-icon far fa-arrow-alt-circle-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-container mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, this.state.history.length != 0 ? /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"text-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 41\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 41\n      }\n    }, \"Details\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      className: \"tableBody\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, rows)) : /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, \"No Data Available\"))));\n  }\n\n}\n\nexport default History;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/History.js"],"names":["React","Component","Details","Redirect","History","constructor","renderTable","historyData","state","history","rows","map","ind","date","showDitails","_id","classID","forEach","hist","setState","students","imgs","images","back","props","onChangeRoute","allStudents","route","componentDidMount","baseUrl","document","getElementById","defaultValue","url","selected_class","fetch","then","response","json","classData","std","id","id_number","name","firstName","lastName","catch","e","console","log","render","className","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Details from './Details';\nimport { Redirect } from 'react-router-dom';\nimport '../css/table.css';\nimport '../css/myClasses.css';\n\nclass History extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            history: [],\n            students: [],\n            allStudents: [],\n            imgs: [],\n            date: '',\n            showDitails: false,\n            route: null\n        }\n    }\n    componentDidMount() {\n\n        let baseUrl = document.getElementById('baseUrl').defaultValue;\n        let url = `${baseUrl}/classHistory/${this.props.selected_class}`;\n        fetch(url)\n            .then(response => response.json())\n            .then(classData => {\n                let allStudents = classData.students.map(std => {\n                    return {\n                        id: std.id_number,\n                        name: std.firstName + ' ' + std.lastName\n                    }\n                })\n                this.setState({\n                    history: classData.history,\n                    allStudents: allStudents\n                });\n            })\n            .catch(e => { console.log(\"error while getting history data \\n\", e) });\n    }\n    renderTable = () => {\n        let historyData = this.state.history;\n        let rows = historyData.map((history, ind) => {\n            return (\n                <tr key={ind}>\n                    <td className=\"date\">{history.date}</td>\n                    <td><button className=\"shadow grow my-button detailsBtn\" hover-data=\"Show Details\" onClick={() => { this.showDitails(history._id) }}><i class=\"f4 btn-icon fas fa-question\"></i></button></td>\n                </tr>\n            )\n        });\n        return rows;\n    }\n    showDitails = (classID) => {\n        let history = this.state.history;\n        history.forEach(hist => {\n            if (classID === hist._id) {\n                this.setState({\n                    students: hist.students,\n                    imgs: hist.images,\n                    date: hist.date,\n                    showDitails: true\n                })\n            }\n        })\n    }\n\n    back = () => {\n        this.props.onChangeRoute('/show/classData', 0);\n    }\n    render() {\n        let rows = this.renderTable();\n        let { students, allStudents, imgs, date } = this.state;\n        let className = this.props.selected_class;\n        let historyData = { students, allStudents, imgs, date, className };\n        return (\n            <>\n                {this.state.route ? <Redirect exact to={this.state.route} /> : null}\n                {this.state.showDitails && (<Details historyData={historyData} onChangeRoute={this.props.onChangeRoute} backToHistory={true} />)}\n                { !this.state.showDitails && (<div className=\"history\">\n                    <div className=\"jsBack\">\n                        <button hover-data=\"Back\"\n                            onClick={this.back} style={{}} className=\"red-btn my-button \" >\n                            <i className=\"btn-icon far fa-arrow-alt-circle-left\"></i>\n                        </button>\n                    </div>\n                    <div className=\"table-container mt-3\">\n                        {this.state.history.length != 0 ?\n                            <table className=\"table1\">\n                                <thead className=\"text-dark\" >\n                                    <tr>\n                                        <th>Date</th>\n                                        <th>Details</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"tableBody\">\n                                    {rows}\n                                </tbody>\n                            </table>\n                        :\n                        <h1>No Data Available</h1>\n                        }\n                    </div>\n                </div>)}\n            </>\n        )\n    }\n}\nexport default History;"]},"metadata":{},"sourceType":"module"}