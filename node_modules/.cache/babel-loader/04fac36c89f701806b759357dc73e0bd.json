{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/graduation-project/graduation-project/src/components/EditClass.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport AddStudents from './AddStudents';\nimport Swal from 'sweetalert2';\nimport './CreateClass.css';\n\nclass EditClass extends Component {\n  constructor() {\n    super();\n\n    this.renderTable = students => {\n      let rows = students.map(std => {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          id: `r${std.id}`,\n          key: std.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 21\n          }\n        }, std.id), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 21\n          }\n        }, std.name), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          onClick: () => this.deleteStd(std.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 25\n          }\n        }, \"X\")));\n      });\n      this.setState({\n        rows\n      });\n    };\n\n    this.deleteStd = id => {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes, delete it!',\n        cancelButtonText: 'No, cancel!',\n        reverseButtons: true\n      }).then(result => {\n        if (result.isConfirmed) {\n          let changedList = [].concat(this.state.lastStateOfStudents);\n          let lastStateOfStudents = changedList.length ? changedList : [].concat(this.state.students);\n          lastStateOfStudents = lastStateOfStudents.filter(std => {\n            return std.id !== id;\n          });\n          let rows = this.state.rows;\n          rows = rows.filter(std => std.key !== id);\n          this.setState({\n            rows,\n            isThereChanges: true,\n            lastStateOfStudents\n          });\n          swalWithBootstrapButtons.fire('Deleted!', 'Your file has been deleted.', 'success');\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          swalWithBootstrapButtons.fire('Cancelled', 'Your imaginary file is safe :)', 'error');\n        }\n      });\n    };\n\n    this.addStd = arr => {\n      let changedList = [].concat(this.state.lastStateOfStudents);\n      let lastStateOfStudents = changedList.length ? changedList : [].concat(this.state.students);\n      let idsOfCurrentStudents = lastStateOfStudents.map(obj => obj.id).join(' ');\n      let isThereChanges = this.state.isThereChanges;\n      arr.forEach(std => {\n        if (!idsOfCurrentStudents.includes(std.id)) {\n          lastStateOfStudents.push(std);\n          this.renderTable(lastStateOfStudents);\n          isThereChanges = true;\n        }\n      });\n      this.setState({\n        clickedAdd: false,\n        isThereChanges,\n        lastStateOfStudents\n      });\n    };\n\n    this.onAddStd = () => {\n      this.setState({\n        clickedAdd: true\n      });\n    };\n\n    this.onDeleteClass = () => {\n      Swal.fire({\n        title: 'Are you sure?',\n        html: \"<h5 class='text-danger'>You won't to delete this class !</h5>\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.isConfirmed) {\n          let classData = {\n            className: this.props.classInfo.className\n          };\n          let baseUrl = document.getElementById('baseUrl').value;\n          let url = `${baseUrl}/deleteClass`;\n          let requestOptions = {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(classData)\n          };\n          fetch(url, requestOptions).then(res => res.json()).then(console.log).catch(e => {\n            console.log(\"error on Delete class request..\", e);\n          });\n          this.props.onChangeRoute('/show');\n          Swal.fire('Deleted!', 'Class has been deleted.', 'success');\n        }\n      });\n    };\n\n    this.onConfirm = () => {\n      Swal.fire({\n        title: 'Do you want to save the changes?',\n        showDenyButton: true,\n        showCancelButton: true,\n        confirmButtonText: `Save`,\n        denyButtonText: `Don't save`,\n        icon: 'info'\n      }).then(result => {\n        if (result.isConfirmed) {\n          let classData = {\n            className: this.props.classInfo.className,\n            students: this.state.lastStateOfStudents\n          };\n          let baseUrl = document.getElementById('baseUrl').value;\n          let url = `${baseUrl}/editClass`;\n          let requestOptions = {\n            method: 'PUT',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(classData)\n          };\n          fetch(url, requestOptions).then(res => res.json()).then(console.log).catch(e => {\n            console.log(\"error on edit class request..\", e);\n          });\n          this.setState({\n            isThereChanges: false,\n            lastStateOfStudents: []\n          });\n          this.props.onChangeRoute('/show');\n          Swal.fire('Saved!', '', 'success');\n        } else if (result.isDenied) {\n          this.onCancel();\n          Swal.fire('Changes are not saved', '', 'info');\n        }\n      });\n    };\n\n    this.onCancel = () => {\n      this.renderTable(this.state.students);\n      this.setState({\n        isThereChanges: false,\n        lastStateOfStudents: []\n      });\n    };\n\n    this.back = () => {\n      this.setState({});\n      this.props.onChangeRoute('/show');\n    };\n\n    this.state = {\n      rows: [],\n      clickedAdd: false,\n      isThereChanges: false,\n      students: [],\n      lastStateOfStudents: []\n    };\n  }\n\n  componentDidMount() {\n    let students = [].concat(this.props.classInfo.students);\n    this.renderTable(students);\n    this.setState({\n      students\n    });\n  }\n\n  render() {\n    let {\n      rows\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"mt-2 grow pointer\",\n      onClick: this.back,\n      src: \"https://img.icons8.com/fluent/48/000000/circled-left.png\",\n      alt: \"go back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"f2 mt4 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, this.props.classInfo.className), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered mt5\",\n      style: {\n        width: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"text-dark\",\n      style: {\n        fontFamily: 'Lobster',\n        letterSpacing: '2px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 33\n      }\n    }, \"Student ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 33\n      }\n    }, \"Student Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 33\n      }\n    }, \"Delete\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      id: \"body\",\n      style: {\n        fontFamily: 'Acme',\n        color: 'gray'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    }, rows))), !this.state.clickedAdd && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn f3 grow btn-warning br4 shadow\",\n      onClick: this.onAddStd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 46\n      }\n    }, \"Add Students\"), this.state.clickedAdd && /*#__PURE__*/React.createElement(AddStudents, {\n      createNew: false,\n      onAddStd: this.addStd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 47\n      }\n    }), this.state.isThereChanges && /*#__PURE__*/React.createElement(Row, {\n      className: \"mv5 justify-content-center\",\n      xs: 1,\n      md: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      md: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ma2 btn f3 grow btn-success br4 shadow\",\n      onClick: this.onConfirm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 45\n      }\n    }, \"Confirm Changes\")), /*#__PURE__*/React.createElement(Col, {\n      xs: 12,\n      md: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ma2 btn f3 grow btn-danger  br4 shadow \",\n      onClick: this.onCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 45\n      }\n    }, \"Cancel \"))), /*#__PURE__*/React.createElement(Row, {\n      className: \"ma3 justify-content-start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"pa0 justify-start flex\",\n      xs: 12,\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.onDeleteClass,\n      className: \"ma2 btn f5 grow btn-danger  br4 shadow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 77\n      }\n    }, \"Delete Class !\"))));\n  }\n\n}\n\nexport default EditClass;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/EditClass.js"],"names":["React","Component","Col","Row","AddStudents","Swal","EditClass","constructor","renderTable","students","rows","map","std","id","name","deleteStd","setState","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","then","result","isConfirmed","changedList","concat","state","lastStateOfStudents","length","filter","key","isThereChanges","dismiss","DismissReason","cancel","addStd","arr","idsOfCurrentStudents","obj","join","forEach","includes","push","clickedAdd","onAddStd","onDeleteClass","html","confirmButtonColor","cancelButtonColor","classData","className","props","classInfo","baseUrl","document","getElementById","value","url","requestOptions","method","headers","body","JSON","stringify","fetch","res","json","console","log","catch","e","onChangeRoute","onConfirm","showDenyButton","denyButtonText","isDenied","onCancel","back","componentDidMount","render","width","fontFamily","letterSpacing","color"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport AddStudents from './AddStudents';\nimport Swal from 'sweetalert2'\nimport './CreateClass.css';\n\nclass EditClass extends Component {\n    constructor() {\n        super();\n        this.state = {\n            rows: [],\n            clickedAdd: false,\n            isThereChanges: false,\n            students: [],\n            lastStateOfStudents: [],\n        }\n    }\n\n    componentDidMount() {\n        let students = [].concat(this.props.classInfo.students);\n        this.renderTable(students);\n        this.setState({ students });\n    }\n\n    renderTable = (students) => {\n        let rows = students.map((std) => {\n            return (\n                <tr id={`r${std.id}`} key={std.id}>\n                    <td>{std.id}</td>\n                    <td>{std.name}</td>\n                    <td><button onClick={() => this.deleteStd(std.id)}>X</button></td>\n                </tr>\n            )\n        });\n        this.setState({ rows });\n    }\n\n    deleteStd = (id) => {\n        const swalWithBootstrapButtons = Swal.mixin({\n            customClass: {\n                confirmButton: 'btn btn-success',\n                cancelButton: 'btn btn-danger'\n            },\n            buttonsStyling: false\n        })\n\n        swalWithBootstrapButtons.fire({\n            title: 'Are you sure?',\n            text: \"You won't be able to revert this!\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonText: 'Yes, delete it!',\n            cancelButtonText: 'No, cancel!',\n            reverseButtons: true\n        }).then((result) => {\n            if (result.isConfirmed) {\n                let changedList = [].concat(this.state.lastStateOfStudents);\n                let lastStateOfStudents = changedList.length ? changedList : [].concat(this.state.students);\n                lastStateOfStudents = lastStateOfStudents.filter(std => {\n                    return std.id !== id;\n                })\n                let rows = this.state.rows;\n                rows = rows.filter(std => std.key !== id);\n                this.setState({\n                    rows,\n                    isThereChanges: true,\n                    lastStateOfStudents\n                });\n                swalWithBootstrapButtons.fire(\n                    'Deleted!',\n                    'Your file has been deleted.',\n                    'success'\n                )\n            } else if (\n                result.dismiss === Swal.DismissReason.cancel\n            ) {\n                swalWithBootstrapButtons.fire(\n                    'Cancelled',\n                    'Your imaginary file is safe :)',\n                    'error'\n                )\n            }\n        })\n\n    }\n\n    addStd = (arr) => {\n        let changedList = [].concat(this.state.lastStateOfStudents);\n        let lastStateOfStudents = changedList.length ? changedList : [].concat(this.state.students);\n        let idsOfCurrentStudents = lastStateOfStudents.map(obj => obj.id).join(' ');\n        let isThereChanges = this.state.isThereChanges;\n        arr.forEach(std => {\n            if (!idsOfCurrentStudents.includes(std.id)) {\n                lastStateOfStudents.push(std);\n                this.renderTable(lastStateOfStudents);\n                isThereChanges = true;\n            }\n        });\n        this.setState({\n            clickedAdd: false,\n            isThereChanges,\n            lastStateOfStudents\n        });\n    }\n\n    onAddStd = () => {\n        this.setState({ clickedAdd: true });\n    }\n\n    onDeleteClass = () => {\n        Swal.fire({\n            title: 'Are you sure?',\n            html: \"<h5 class='text-danger'>You won't to delete this class !</h5>\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Yes, delete it!'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                let classData = {\n                    className: this.props.classInfo.className\n                }\n                let baseUrl= document.getElementById('baseUrl').value;\n                let url = `${baseUrl}/deleteClass`;\n                let requestOptions = {\n                    method: 'DELETE',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(classData),\n                }\n                fetch(url, requestOptions)\n                    .then(res => res.json())\n                    .then(console.log)\n                    .catch(e => { console.log(\"error on Delete class request..\", e) });\n                this.props.onChangeRoute('/show');\n                Swal.fire(\n                    'Deleted!',\n                    'Class has been deleted.',\n                    'success'\n                )\n            }\n        })\n    }\n\n    onConfirm = () => {\n        Swal.fire({\n            title: 'Do you want to save the changes?',\n            showDenyButton: true,\n            showCancelButton: true,\n            confirmButtonText: `Save`,\n            denyButtonText: `Don't save`,\n            icon: 'info'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                let classData = {\n                    className: this.props.classInfo.className,\n                    students: this.state.lastStateOfStudents\n                }\n                let baseUrl= document.getElementById('baseUrl').value;\n                let url = `${baseUrl}/editClass`;\n                let requestOptions = {\n                    method: 'PUT',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(classData),\n                }\n                fetch(url, requestOptions)\n                    .then(res => res.json())\n                    .then(console.log)\n                    .catch(e => { console.log(\"error on edit class request..\", e) });\n\n                this.setState({\n                    isThereChanges: false,\n                    lastStateOfStudents: [],\n                });\n                this.props.onChangeRoute('/show');\n                Swal.fire('Saved!', '', 'success')\n            } else if (result.isDenied) {\n                this.onCancel();\n                Swal.fire('Changes are not saved', '', 'info')\n            }\n        })\n    }\n\n    onCancel = () => {\n        this.renderTable(this.state.students);\n        this.setState({\n            isThereChanges: false,\n            lastStateOfStudents: []\n        });\n    }\n\n    back = () => {\n        this.setState({\n        });\n        this.props.onChangeRoute('/show');\n    }\n\n    render() {\n        let { rows } = this.state;\n        return (\n            <>\n                \n                <img className=\"mt-2 grow pointer\" onClick={this.back} src=\"https://img.icons8.com/fluent/48/000000/circled-left.png\" alt=\"go back\" />\n                <h2 className=\"f2 mt4 \">{this.props.classInfo.className}</h2>\n                <>\n                    <table className=\"table table-bordered mt5\" style={{ width: '100%' }}>\n                        <thead className=\"text-dark\" style={{ fontFamily: 'Lobster', letterSpacing: '2px' }}>\n                            <tr>\n                                <th>Student ID</th>\n                                <th>Student Name</th>\n                                <th>Delete</th>\n                            </tr>\n                        </thead>\n                        <tbody id='body' style={{ fontFamily: 'Acme', color: 'gray' }}>\n                            {rows}\n                        </tbody>\n                    </table>\n                </>\n\n                { !this.state.clickedAdd && (<button className=\"btn f3 grow btn-warning br4 shadow\" onClick={this.onAddStd}>Add Students</button>)}\n                {   this.state.clickedAdd && (<AddStudents createNew={false} onAddStd={this.addStd} />)}\n\n                { this.state.isThereChanges && (\n                    <Row className=\"mv5 justify-content-center\" xs={1} md={2}>\n                        <Col xs={12} md={3}><button className=\"ma2 btn f3 grow btn-success br4 shadow\" onClick={this.onConfirm}>Confirm Changes</button></Col>\n                        <Col xs={12} md={3}><button className=\"ma2 btn f3 grow btn-danger  br4 shadow \" onClick={this.onCancel}>Cancel </button></Col>\n                    </Row>\n                )}\n                <Row className=\"ma3 justify-content-start\"  >\n                    <Col className=\"pa0 justify-start flex\" xs={12} md={12}><button onClick={this.onDeleteClass} className=\"ma2 btn f5 grow btn-danger  br4 shadow\">Delete Class !</button></Col>\n                </Row>\n            </>\n        )\n    }\n\n}\nexport default EditClass;"]},"metadata":{},"sourceType":"module"}