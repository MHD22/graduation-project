{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/graduation-project/graduation-project/src/components/CreateClass.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport './CreateClass.css';\nimport { Redirect } from \"react-router-dom\";\n\nclass CreateClass extends Component {\n  constructor() {\n    super();\n\n    this.checkLoggedIn = () => {\n      const data = sessionStorage.getItem('teacher');\n\n      if (!data) {\n        window.location.replace('http://localhost:3001/login');\n      } else {\n        this.setState({\n          hidePage: false\n        });\n      }\n    };\n\n    this.next = e => {\n      this.setState({\n        isClickedNext: true\n      });\n    };\n\n    this.handleFilter = event => {\n      this.setState({\n        search: event.target.value\n      });\n      console.log(this.state.search);\n    };\n\n    this.addStudent = e => {\n      let id = e.target.value;\n      let fname = e.target.getAttribute('data-fname');\n      let lname = e.target.getAttribute('data-lname');\n      let arrIDS = this.state.addedStdID;\n      let arrFN = this.state.addedStdFName;\n      let arrLN = this.state.addedStdLName;\n      let found = arrIDS.indexOf(id);\n\n      if (found === -1) {\n        arrIDS.push(id);\n        arrFN.push(fname);\n        arrLN.push(lname); // document.getElementById(id + 'label').style.background = \"#004d1a\";\n\n        this.setState({\n          addedStdID: arrIDS,\n          addedStdFName: arrFN,\n          addedStdLName: arrLN\n        });\n      } else {\n        arrIDS.splice(found, 1);\n        arrFN.splice(found, 1);\n        arrLN.splice(found, 1);\n        this.setState({\n          addStudent: arrIDS,\n          addedStdFName: arrFN,\n          addedStdLName: arrLN\n        });\n        document.getElementById(id + 'label').style.background = \"#343a40\";\n      }\n\n      console.log(this.state.addedStdID, this.state.addedStdFName, this.state.addedStdLName);\n    };\n\n    this.courseName = e => {\n      let cName = e.target.value;\n      console.log(cName);\n      this.setState({\n        courseName: cName\n      });\n    };\n\n    this.addNewClass = e => {\n      console.log(this.state.students);\n      fetch('http://localhost:3000/classes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          teacherID: JSON.parse(sessionStorage.getItem('teacher')).id_number,\n          className: this.state.courseName,\n          ids: this.state.addedStdID,\n          fnames: this.state.addedStdFName,\n          lnames: this.state.addedStdLName\n        })\n      }).then(res => res.json()).then(this.setState({\n        title: 'Done',\n        body: 'Class Created Successfully ..',\n        show: true\n      })).catch();\n    };\n\n    this.handleClose = e => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.done = e => {\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.state = {\n      isClickedNext: false,\n      image: null,\n      url: '',\n      students: [],\n      search: '',\n      addedStdID: [],\n      addedStdFName: [],\n      addedStdLName: [],\n      courseName: '',\n      hidePage: true,\n      show: false,\n      title: '',\n      body: '',\n      redirect: false\n    };\n  } //To Check if LoggedIn .\n\n\n  componentDidMount() {\n    this.checkLoggedIn();\n    fetch('http://localhost:3000/students').then(res => res.json()).then(data => {\n      this.setState({\n        students: data\n      }, () => {\n        console.log(this.state.students);\n      });\n    }).catch(e => console.log(e));\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/show\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const {\n      isClickedNext\n    } = this.state;\n    let filteredArray = this.state.students.filter(std => {\n      return `${std.fname} ${std.lname} ${std.id}`.toLowerCase().includes(this.state.search.toLowerCase());\n    });\n\n    if (this.state.addedStdID.length !== 0) {\n      this.state.addedStdID.forEach(id => {\n        let name = document.getElementById(id + 'label');\n\n        if (name !== null) {\n          name.style.background = \"#004d1a\";\n        }\n      });\n    }\n\n    filteredArray = filteredArray.map((std, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: std.id,\n        id: std.id + 'label',\n        key: std.id,\n        \"data-name\": std.fname,\n        className: \"student\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 16\n        }\n      }, std.fname + ' ' + std.lname + ' | ' + std.id, \" \", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        \"data-fname\": std.fname,\n        \"data-lname\": std.lname,\n        value: std.id,\n        id: std.id,\n        onChange: this.addStudent,\n        className: \"check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 164\n        }\n      }));\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      hidden: this.state.hidePage,\n      className: \"mt-3 bg-black-10 shadow-5 p-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, isClickedNext === false ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"main-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, \"Add Class\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Class Name\",\n      onChange: this.courseName,\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.next,\n      id: \"submit\",\n      className: \"btn f3 grow btn-success btn-submit mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, \"Next\"), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"main-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, \"Add Class\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Class Name\",\n      onChange: this.courseName,\n      className: \"form-input mt-4\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.next,\n      id: \"submit\",\n      className: \"btn f3 grow btn-success btn-submit mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, \"Next\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"main-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, \"Add Student\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"search\",\n      onChange: this.handleFilter,\n      type: \"search\",\n      placeholder: \"search on students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cont-cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"students p-3\",\n      id: \"students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 37\n      }\n    }, filteredArray))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      id: \"submit\",\n      className: \"btn f3 grow btn-success btn-submit\",\n      onClick: this.addNewClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, \"Done\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 136\n      }\n    })), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleClose,\n      backdrop: \"static\",\n      keyboard: false,\n      size: \"lg\",\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      className: \"text-info text-center p-5 font-lobster\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, this.state.title), /*#__PURE__*/React.createElement(Modal.Body, {\n      className: \"text-center  font-acme\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }, this.state.body), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      className: \"text-center grow\",\n      onClick: this.done,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, \"Done\")))));\n  }\n\n}\n\nexport default CreateClass;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/CreateClass.js"],"names":["React","Component","Button","Modal","Redirect","CreateClass","constructor","checkLoggedIn","data","sessionStorage","getItem","window","location","replace","setState","hidePage","next","e","isClickedNext","handleFilter","event","search","target","value","console","log","state","addStudent","id","fname","getAttribute","lname","arrIDS","addedStdID","arrFN","addedStdFName","arrLN","addedStdLName","found","indexOf","push","splice","document","getElementById","style","background","courseName","cName","addNewClass","students","fetch","method","headers","body","JSON","stringify","teacherID","parse","id_number","className","ids","fnames","lnames","then","res","json","title","show","catch","handleClose","done","redirect","image","url","componentDidMount","render","filteredArray","filter","std","toLowerCase","includes","length","forEach","name","map","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button , Modal } from 'react-bootstrap';\nimport './CreateClass.css';\nimport { Redirect } from \"react-router-dom\";\n\nclass CreateClass extends Component {\n    constructor() {\n        super();\n        this.state = {\n            isClickedNext: false,\n            image: null,\n            url: '',\n            students:[],\n            search:'' ,\n            addedStdID : [] ,\n            addedStdFName : [] ,\n            addedStdLName : [] ,\n            courseName : '' ,\n            hidePage : true ,\n            show : false ,\n            title : '' ,\n            body : '' ,\n            redirect : false\n        }\n    }\n\n    //To Check if LoggedIn .\n    checkLoggedIn = () => {\n        const data = sessionStorage.getItem('teacher') ;\n        if(!data){\n            window.location.replace('http://localhost:3001/login') ;\n        }\n        else {\n            this.setState({\n                hidePage : false\n            })\n        }\n    }\n\n    //for hide class name input and show the add new student and done \n    next = (e) => {\n        this.setState({ isClickedNext: true});\n    }\n\n    componentDidMount() {\n        this.checkLoggedIn() ;\n        fetch('http://localhost:3000/students')\n        .then(res=> res.json()).then(data=>{\n            this.setState({students:data} , ()=>{console.log(this.state.students)});\n        })\n        .catch(e=>console.log(e));\n    }\n\n    handleFilter=(event)=>{\n        this.setState({search:event.target.value});\n        console.log(this.state.search);\n    }\n\n    //Add the select student to the state .\n    addStudent = (e) => {\n        let id = e.target.value ;\n        let fname = e.target.getAttribute('data-fname') ;\n        let lname = e.target.getAttribute('data-lname') ;\n        let arrIDS= this.state.addedStdID;\n        let arrFN= this.state.addedStdFName ;\n        let arrLN = this.state.addedStdLName ;\n        let found = arrIDS.indexOf(id) ;\n        if(found === -1){\n            arrIDS.push(id) ;\n            arrFN.push(fname) ;\n            arrLN.push(lname) ;\n            // document.getElementById(id + 'label').style.background = \"#004d1a\";\n            this.setState({\n                addedStdID : arrIDS,\n                addedStdFName : arrFN,\n                addedStdLName : arrLN ,\n            }) ;\n        }\n        else {\n            arrIDS.splice(found, 1);\n            arrFN.splice(found, 1);\n            arrLN.splice(found, 1);\n            this.setState({addStudent: arrIDS, addedStdFName : arrFN, addedStdLName : arrLN});\n            \n            document.getElementById(id + 'label').style.background = \"#343a40\";\n        }\n        console.log(this.state.addedStdID , this.state.addedStdFName , this.state.addedStdLName) ;\n    }\n\n    courseName = (e) => {\n        let cName = e.target.value ;\n        console.log(cName) ;\n        this.setState({\n            courseName : cName\n        })\n    }\n\n    //Sende the students ids to the backend\n    addNewClass = (e) => {\n        console.log(this.state.students);\n        fetch('http://localhost:3000/classes',{\n           method: 'POST',\n           headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            teacherID : JSON.parse(sessionStorage.getItem('teacher')).id_number ,\n            className:this.state.courseName,\n            ids:this.state.addedStdID ,\n            fnames : this.state.addedStdFName ,\n            lnames : this.state.addedStdLName\n          }),\n       }).then(res => res.json()).then(\n        this.setState({\n            title : 'Done' ,\n            body : 'Class Created Successfully ..' ,\n            show : true\n        })\n       ).catch(\n\n       );   \n    }\n\n    handleClose = (e) => {\n        this.setState({\n            show : false \n        }) ;\n    }\n\n    done = (e) => {\n        this.setState({\n            redirect : true\n        }) ;\n    }\n\n    render() {\n\n        if(this.state.redirect){\n            return <Redirect to='/show'/>;\n        }\n\n        const { isClickedNext } = this.state;\n        let filteredArray = this.state.students.filter( (std)=>{\n            return (`${std.fname} ${std.lname} ${std.id}`).toLowerCase().includes(this.state.search.toLowerCase());\n        });\n        if (this.state.addedStdID.length !== 0){\n        \n        this.state.addedStdID.forEach((id) => {\n            let name = document.getElementById(id + 'label') ;\n            if(name !== null){\n            name.style.background = \"#004d1a\";\n            }\n            \n        })\n    }\n        filteredArray = filteredArray.map((std , i)=>{\n        return <label htmlFor={std.id} id={std.id + 'label'} key={std.id} data-name={std.fname} className=\"student\">{std.fname + ' ' + std.lname + ' | ' + std.id} <input type=\"checkbox\" data-fname={std.fname} data-lname={std.lname} value={std.id} id={std.id} onChange={this.addStudent} className=\"check\"/></label>\n    })\n      \n        return (\n            <>\n                <div hidden={this.state.hidePage} className=\"mt-3 bg-black-10 shadow-5 p-5 \">\n                    {isClickedNext === false ? \n                    <>\n                        <form>\n\n                        </form>\n                        <h1 className=\"main-title\">Add Class</h1>\n                        <input type=\"text\" placeholder=\"Class Name\" onChange={this.courseName} className=\"form-input mt-4\" required={true} />\n                        <br />\n                        <Button onClick={this.next} id='submit' className=\"btn f3 grow btn-success btn-submit mt-4\">Next</Button>\n                        <h1 className=\"main-title\">Add Class</h1>\n                        <input type=\"text\" placeholder=\"Class Name\" onChange={this.courseName} className=\"form-input mt-4\" required={true} />\n                        <br />\n                        <Button onClick={this.next} id='submit' className=\"btn f3 grow btn-success btn-submit mt-4\">Next</Button>\n                    </>\n                        :\n                    <>\n                            <h1 className=\"main-title\">Add Student</h1>\n                            <div className= \"container-students\">\n                                <input className=\"search\" onChange={this.handleFilter} type=\"search\" placeholder=\"search on students\"/>\n                                <div className=\"cont-cont\">\n                                    <div className=\"students p-3\" id=\"students\">\n                                            {filteredArray}\n                                    </div>\n                                </div>\n                            </div>\n                            <br />\n                            <Button id='submit' className=\"btn f3 grow btn-success btn-submit\" onClick={this.addNewClass}>Done</Button><br />\n                    </>}\n                    <Modal\n                        show={this.state.show}\n                        onHide={this.handleClose}\n                        backdrop=\"static\"\n                        keyboard={false}\n                        size = \"lg\"\n                        centered\n                    >\n\n                        <Modal.Title className=\"text-info text-center p-5 font-lobster\">{this.state.title}</Modal.Title>\n\n                        <Modal.Body className=\"text-center  font-acme\">{this.state.body}</Modal.Body>\n                        <Modal.Footer>\n                        <Button variant=\"primary\" className=\"text-center grow\" onClick={this.done}>Done</Button>\n                        </Modal.Footer>\n                    </Modal>\n                </div>\n            </>);\n    }\n}\n\nexport default CreateClass;\n\n\n\n"]},"metadata":{},"sourceType":"module"}