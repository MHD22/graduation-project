{"ast":null,"code":"import _classCallCheck from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Details from'./Details';import{Redirect}from'react-router-dom';import'../css/table.css';import'../css/myClasses.css';var History=/*#__PURE__*/function(_Component){_inherits(History,_Component);var _super=_createSuper(History);function History(){var _this;_classCallCheck(this,History);_this=_super.call(this);_this.renderTable=function(){var historyData=_this.state.history;var rows=historyData.map(function(history,ind){return/*#__PURE__*/React.createElement(\"tr\",{key:ind},/*#__PURE__*/React.createElement(\"td\",{className:\"date\"},history.date),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"shadow grow my-button detailsBtn\",\"hover-data\":\"Show Details\",onClick:function onClick(){_this.showDitails(history._id);}},/*#__PURE__*/React.createElement(\"i\",{class:\"f4 btn-icon fas fa-question\"}))));});return rows;};_this.showDitails=function(classID){var history=_this.state.history;history.forEach(function(hist){if(classID===hist._id){_this.setState({students:hist.students,imgs:hist.images,date:hist.date,showDitails:true});}});};_this.back=function(){_this.props.onChangeRoute('/show/classData',0);};_this.state={history:[],students:[],allStudents:[],imgs:[],date:'',showDitails:false,route:null};return _this;}_createClass(History,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var baseUrl=document.getElementById('baseUrl').defaultValue;var url=\"\".concat(baseUrl,\"/classHistory/\").concat(this.props.selected_class);fetch(url).then(function(response){return response.json();}).then(function(classData){var allStudents=classData.students.map(function(std){return{id:std.id_number,name:std.firstName+' '+std.lastName};});_this2.setState({history:classData.history,allStudents:allStudents});}).catch(function(e){console.log(\"error while getting history data \\n\",e);});}},{key:\"render\",value:function render(){var rows=this.renderTable();var _this$state=this.state,students=_this$state.students,allStudents=_this$state.allStudents,imgs=_this$state.imgs,date=_this$state.date;var className=this.props.selected_class;var historyData={students:students,allStudents:allStudents,imgs:imgs,date:date,className:className};return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.route?/*#__PURE__*/React.createElement(Redirect,{exact:true,to:this.state.route}):null,this.state.showDitails&&/*#__PURE__*/React.createElement(Details,{historyData:historyData,onChangeRoute:this.props.onChangeRoute,backToHistory:true}),!this.state.showDitails&&/*#__PURE__*/React.createElement(\"div\",{className:\"history\"},/*#__PURE__*/React.createElement(\"div\",{className:\"jsBack\"},/*#__PURE__*/React.createElement(\"button\",{\"hover-data\":\"Back\",onClick:this.back,style:{},className:\"red-btn my-button \"},/*#__PURE__*/React.createElement(\"i\",{className:\"btn-icon far fa-arrow-alt-circle-left\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-container mt-3\"},this.state.history.length!==0?/*#__PURE__*/React.createElement(\"table\",{className:\"table1\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"text-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Details\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"tableBody\"},rows)):/*#__PURE__*/React.createElement(\"h1\",null,\"No Data Available\"))));}}]);return History;}(Component);export default History;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/History.js"],"names":["React","Component","Details","Redirect","History","renderTable","historyData","state","history","rows","map","ind","date","showDitails","_id","classID","forEach","hist","setState","students","imgs","images","back","props","onChangeRoute","allStudents","route","baseUrl","document","getElementById","defaultValue","url","selected_class","fetch","then","response","json","classData","std","id","id_number","name","firstName","lastName","catch","e","console","log","className","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Details from './Details';\nimport { Redirect } from 'react-router-dom';\nimport '../css/table.css';\nimport '../css/myClasses.css';\n\nclass History extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            history: [],\n            students: [],\n            allStudents: [],\n            imgs: [],\n            date: '',\n            showDitails: false,\n            route: null\n        }\n    }\n    componentDidMount() {\n\n        let baseUrl = document.getElementById('baseUrl').defaultValue;\n        let url = `${baseUrl}/classHistory/${this.props.selected_class}`;\n        fetch(url)\n            .then(response => response.json())\n            .then(classData => {\n                let allStudents = classData.students.map(std => {\n                    return {\n                        id: std.id_number,\n                        name: std.firstName + ' ' + std.lastName\n                    }\n                })\n                this.setState({\n                    history: classData.history,\n                    allStudents: allStudents\n                });\n            })\n            .catch(e => { console.log(\"error while getting history data \\n\", e) });\n    }\n    renderTable = () => {\n        let historyData = this.state.history;\n        let rows = historyData.map((history, ind) => {\n            return (\n                <tr key={ind}>\n                    <td className=\"date\">{history.date}</td>\n                    <td><button className=\"shadow grow my-button detailsBtn\" hover-data=\"Show Details\" onClick={() => { this.showDitails(history._id) }}><i class=\"f4 btn-icon fas fa-question\"></i></button></td>\n                </tr>\n            )\n        });\n        return rows;\n    }\n    showDitails = (classID) => {\n        let history = this.state.history;\n        history.forEach(hist => {\n            if (classID === hist._id) {\n                this.setState({\n                    students: hist.students,\n                    imgs: hist.images,\n                    date: hist.date,\n                    showDitails: true\n                })\n            }\n        })\n    }\n\n    back = () => {\n        this.props.onChangeRoute('/show/classData', 0);\n    }\n    render() {\n        let rows = this.renderTable();\n        let { students, allStudents, imgs, date } = this.state;\n        let className = this.props.selected_class;\n        let historyData = { students, allStudents, imgs, date, className };\n        return (\n            <>\n                {this.state.route ? <Redirect exact to={this.state.route} /> : null}\n                {this.state.showDitails && (<Details historyData={historyData} onChangeRoute={this.props.onChangeRoute} backToHistory={true} />)}\n                { !this.state.showDitails && (<div className=\"history\">\n                    <div className=\"jsBack\">\n                        <button hover-data=\"Back\"\n                            onClick={this.back} style={{}} className=\"red-btn my-button \" >\n                            <i className=\"btn-icon far fa-arrow-alt-circle-left\"></i>\n                        </button>\n                    </div>\n                    <div className=\"table-container mt-3\">\n                        {this.state.history.length !== 0 ?\n                            <table className=\"table1\">\n                                <thead className=\"text-dark\" >\n                                    <tr>\n                                        <th>Date</th>\n                                        <th>Details</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"tableBody\">\n                                    {rows}\n                                </tbody>\n                            </table>\n                        :\n                        <h1>No Data Available</h1>\n                        }\n                    </div>\n                </div>)}\n            </>\n        )\n    }\n}\nexport default History;"]},"metadata":{},"sourceType":"module"}