{"ast":null,"code":"import _classCallCheck from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mhd.sad22/graduation-project/graduation-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from\"react-router-dom\";import Swal from'sweetalert2';var TeacherRegister=/*#__PURE__*/function(_Component){_inherits(TeacherRegister,_Component);var _super=_createSuper(TeacherRegister);function TeacherRegister(){var _this;_classCallCheck(this,TeacherRegister);_this=_super.call(this);_this.newTeacher=function(e){e.preventDefault();var formTeacher=document.getElementById('formTeacher');var teacherData={firstName:formTeacher.fname.value,lastName:formTeacher.lname.value,email:formTeacher.email.value,password:formTeacher.tpassword.value,id_number:formTeacher.t_id.value};_this.setState({teacherData:teacherData});// this.clearForm() ;\nvar pattern=/^\\d*[A-Za-z]+\\w*@zu.edu.jo$/ig;var regex=pattern.test(teacherData.email);// let regex = true;\nif(regex){if(teacherData.firstName&&teacherData.lastName&&teacherData.password&&teacherData.id_number&&teacherData.email){_this.storeTeacherDataInDB(teacherData);}else{Swal.fire({icon:'warning',title:'Hmmm ..',html:'<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>'});}}else{Swal.fire({icon:'error',title:'Oops..',html:'<h5 class=\"text-warning font-lobster mt-2\">Email is not valid!</h5>'});}};_this.storeTeacherDataInDB=function(teacherData){var email=teacherData.email,id_number=teacherData.id_number;var bodyData={email:email,id_number:id_number};var baseUrl=document.getElementById('baseUrl').defaultValue;fetch(\"\".concat(baseUrl,\"/teachers\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(bodyData)}).then(function(res){return res.json();}).then(function(res){if(res==='Teacher Is Already Exist.'){Swal.fire({icon:'error',title:'Oops ...',html:'<h5 class=\"text-danger font-lobster mt-2\">Teacher Email or ID is already exist</h5>'});}else{var start=res.indexOf('token:');//5\nif(start!==-1){var hashedToken=res.slice(6);_this.setState({hashedToken:hashedToken});Swal.fire({title:'<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',icon:'question',iconHtml:'ØŸ',html:'<input type=\"text\" id=\"token\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>'}).then(function(){_this.saveTeacher();});}else{Swal.fire({icon:'error',title:'Oops ...',html:'<h5 class=\"text-danger font-lobster mt-2\">Something wrong , pleaase try again later</h5>'});}}}).catch(\"error during send Teacher data to backend\");};_this.clearForm=function(){document.getElementById('fname').value=\"\";document.getElementById('lname').value=\"\";document.getElementById('t_id').value=\"\";document.getElementById('tpassword').value=\"\";};_this.handleClose=function(e){_this.setState({show:false});};_this.done=function(e){_this.setState({redirect:true});};_this.saveTeacher=function(){console.log(\"Hello world!!\");var token=document.getElementById('token').value;if(token){var teacherData=Object.assign({},_this.state.teacherData);var hashedToken=_this.state.hashedToken;teacherData.hashedToken=hashedToken;teacherData.token=token;console.log(teacherData,\" <= teacher data.  \");var baseUrl=document.getElementById('baseUrl').defaultValue;fetch(\"\".concat(baseUrl,\"/teacherRegister\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(teacherData)}).then(function(res){return res.json();}).then(function(res){if(res==='Teacher Added Successfully'){Swal.fire({icon:'success',title:'Success',html:'<h5 class=\"text-success font-lobster mt-2\">Teacher Added Successfully</h5>'});_this.storedUserInSession(_this.state.teacherData);setTimeout(function(){_this.goToHomePage();},2000);}else{Swal.fire({icon:'error',title:'Oops ..!',html:'<h5 class=\"text-danger font-lobster mt-2\">Invalid Token</h5>'});}}).catch(function(e){console.log(\"error when storing teacher data with the tokens.\",e);});}else{Swal.fire({icon:'error',title:'Oops ..!',html:'<h5 class=\"text-danger font-lobster mt-2\">Invalid Token</h5>'});}};_this.storedUserInSession=function(userData){var firstName=userData.firstName,lastName=userData.lastName,id_number=userData.id_number;var storedData={firstName:firstName,lastName:lastName,id_number:id_number};sessionStorage.setItem('teacher',JSON.stringify(storedData));};_this.goToHomePage=function(){window.location.replace(\"http://localhost:3000\");};_this.checkMail=function(e){var pattern=/^\\d*[A-Za-z]+\\w*@zu.edu.jo$/ig;var regex=pattern.test(e.target.value);if(regex){_this.setState({showTrueSignE:true,showFalseSignE:false});}else{_this.setState({showTrueSignE:false,showFalseSignE:true});}};_this.state={verified:false,teacherData:{},hashedToken:'',route:null,showTrueSignE:false,showFalseSignE:false};return _this;}_createClass(TeacherRegister,[{key:\"render\",value:function render(){if(this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{id:\"formTeacher\",hidden:this.state.verified},/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"First Name\"),/*#__PURE__*/React.createElement(\"input\",{name:\"fname\",id:\"fname\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"Last Name\"),/*#__PURE__*/React.createElement(\"input\",{name:\"lname\",id:\"lname\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"ID Number\"),/*#__PURE__*/React.createElement(\"input\",{name:\"t_id\",id:\"t_id\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"E-MAIL\"),/*#__PURE__*/React.createElement(\"div\",{className:\"contSigns\"},/*#__PURE__*/React.createElement(\"input\",{name:\"email\",id:\"email\",type:\"email\",onChange:this.checkMail}),/*#__PURE__*/React.createElement(\"span\",{className:\"spanSign\"},/*#__PURE__*/React.createElement(\"i\",{hidden:!this.state.showFalseSignE,className:\" fas fa-exclamation errorSign \"}),/*#__PURE__*/React.createElement(\"i\",{hidden:!this.state.showTrueSignE,className:\"far fa-check-circle checkSign\"}))),/*#__PURE__*/React.createElement(\"label\",{className:\"label-title \"},\"PASSWORD\"),/*#__PURE__*/React.createElement(\"input\",{name:\"tpassword\",id:\"tpassword\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"mt4 my-button\",onClick:this.newTeacher},\"Sign Up\")));}}]);return TeacherRegister;}(Component);export default TeacherRegister;","map":{"version":3,"sources":["/Users/mhd.sad22/graduation-project/graduation-project/src/components/TeacherRegister.js"],"names":["React","Component","Redirect","Swal","TeacherRegister","newTeacher","e","preventDefault","formTeacher","document","getElementById","teacherData","firstName","fname","value","lastName","lname","email","password","tpassword","id_number","t_id","setState","pattern","regex","test","storeTeacherDataInDB","fire","icon","title","html","bodyData","baseUrl","defaultValue","fetch","method","headers","body","JSON","stringify","then","res","json","start","indexOf","hashedToken","slice","iconHtml","saveTeacher","catch","clearForm","handleClose","show","done","redirect","console","log","token","Object","assign","state","storedUserInSession","setTimeout","goToHomePage","userData","storedData","sessionStorage","setItem","window","location","replace","checkMail","target","showTrueSignE","showFalseSignE","verified","route"],"mappings":"oqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,C,GAEMC,CAAAA,e,kHACF,0BAAc,iDACV,wBADU,MAYdC,UAZc,CAYD,SAACC,CAAD,CAAO,CAChBA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,WAAW,CAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAlB,CACA,GAAIC,CAAAA,WAAW,CAAG,CACdC,SAAS,CAAEJ,WAAW,CAACK,KAAZ,CAAkBC,KADf,CAEdC,QAAQ,CAAEP,WAAW,CAACQ,KAAZ,CAAkBF,KAFd,CAGdG,KAAK,CAAET,WAAW,CAACS,KAAZ,CAAkBH,KAHX,CAIdI,QAAQ,CAAEV,WAAW,CAACW,SAAZ,CAAsBL,KAJlB,CAKdM,SAAS,CAAEZ,WAAW,CAACa,IAAZ,CAAiBP,KALd,CAAlB,CAOA,MAAKQ,QAAL,CAAc,CAAEX,WAAW,CAAXA,WAAF,CAAd,EAEA;AAEA,GAAIY,CAAAA,OAAO,CAAG,+BAAd,CACA,GAAIC,CAAAA,KAAK,CAAGD,OAAO,CAACE,IAAR,CAAad,WAAW,CAACM,KAAzB,CAAZ,CACA;AACA,GAAGO,KAAH,CAAS,CACL,GAAIb,WAAW,CAACC,SAAZ,EAAyBD,WAAW,CAACI,QAArC,EAAiDJ,WAAW,CAACO,QAA7D,EAAyEP,WAAW,CAACS,SAArF,EAAkGT,WAAW,CAACM,KAAlH,CAAyH,CACrH,MAAKS,oBAAL,CAA0Bf,WAA1B,EACH,CAFD,IAGK,CACDR,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,SADA,CAENC,KAAK,CAAE,SAFD,CAGNC,IAAI,CAAE,yEAHA,CAAV,EAKH,CACJ,CAXD,IAYK,CACD3B,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,QAFD,CAGNC,IAAI,CAAE,qEAHA,CAAV,EAKH,CACJ,CAhDa,OAkDdJ,oBAlDc,CAkDS,SAACf,WAAD,CAAiB,IAC9BM,CAAAA,KAD8B,CACTN,WADS,CAC9BM,KAD8B,CACvBG,SADuB,CACTT,WADS,CACvBS,SADuB,CAEpC,GAAIW,CAAAA,QAAQ,CAAG,CAAEd,KAAK,CAALA,KAAF,CAASG,SAAS,CAATA,SAAT,CAAf,CACA,GAAIY,CAAAA,OAAO,CAAGvB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCuB,YAAjD,CACAC,KAAK,WAAIF,OAAJ,cAAwB,CACzBG,MAAM,CAAE,MADiB,CAEzBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFgB,CAKzBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,QAAf,CALmB,CAAxB,CAAL,CAOKS,IAPL,CAOU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAAAC,GAAG,CAAI,CAET,GAAIA,GAAG,GAAK,2BAAZ,CAAyC,CACrCtC,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,UAFD,CAGNC,IAAI,CAAE,qFAHA,CAAV,EAKH,CAND,IAOK,CACD,GAAIa,CAAAA,KAAK,CAAGF,GAAG,CAACG,OAAJ,CAAY,QAAZ,CAAZ,CAAmC;AACnC,GAAID,KAAK,GAAK,CAAC,CAAf,CAAkB,CACd,GAAIE,CAAAA,WAAW,CAAGJ,GAAG,CAACK,KAAJ,CAAU,CAAV,CAAlB,CACA,MAAKxB,QAAL,CAAc,CAAEuB,WAAW,CAAXA,WAAF,CAAd,EACA1C,IAAI,CAACwB,IAAL,CAAU,CACNE,KAAK,CAAE,4EADD,CAEND,IAAI,CAAE,UAFA,CAGNmB,QAAQ,CAAE,GAHJ,CAINjB,IAAI,CAAE,+GAJA,CAAV,EAKGU,IALH,CAKQ,UAAM,CACV,MAAKQ,WAAL,GACH,CAPD,EAQH,CAXD,IAYK,CACD7C,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,UAFD,CAGNC,IAAI,CAAE,0FAHA,CAAV,EAKH,CACJ,CACJ,CAvCL,EAwCKmB,KAxCL,CAwCW,2CAxCX,EAyCH,CA/Fa,OAiGdC,SAjGc,CAiGF,UAAM,CACdzC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCI,KAAjC,CAAyC,EAAzC,CACAL,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCI,KAAjC,CAAyC,EAAzC,CACAL,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCI,KAAhC,CAAwC,EAAxC,CACAL,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCI,KAArC,CAA6C,EAA7C,CACH,CAtGa,OAwGdqC,WAxGc,CAwGA,SAAC7C,CAAD,CAAO,CACjB,MAAKgB,QAAL,CAAc,CACV8B,IAAI,CAAE,KADI,CAAd,EAGH,CA5Ga,OA8GdC,IA9Gc,CA8GP,SAAC/C,CAAD,CAAO,CACV,MAAKgB,QAAL,CAAc,CACVgC,QAAQ,CAAE,IADA,CAAd,EAGH,CAlHa,OAmHdN,WAnHc,CAmHA,UAAM,CAChBO,OAAO,CAACC,GAAR,CAAY,eAAZ,EACA,GAAIC,CAAAA,KAAK,CAAGhD,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCI,KAA7C,CACA,GAAI2C,KAAJ,CAAW,CACP,GAAI9C,CAAAA,WAAW,CAAG+C,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkB,MAAKC,KAAL,CAAWjD,WAA7B,CAAlB,CADO,GAEDkC,CAAAA,WAFC,CAEe,MAAKe,KAFpB,CAEDf,WAFC,CAGPlC,WAAW,CAACkC,WAAZ,CAA0BA,WAA1B,CACAlC,WAAW,CAAC8C,KAAZ,CAAoBA,KAApB,CACAF,OAAO,CAACC,GAAR,CAAY7C,WAAZ,CAAyB,qBAAzB,EACA,GAAIqB,CAAAA,OAAO,CAAGvB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCuB,YAAjD,CACAC,KAAK,WAAIF,OAAJ,qBAA+B,CAChCG,MAAM,CAAE,MADwB,CAEhCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFuB,CAKhCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe5B,WAAf,CAL0B,CAA/B,CAAL,CAOK6B,IAPL,CAOU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAPb,EAQKF,IARL,CAQU,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,GAAK,4BAAZ,CAA0C,CACtCtC,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,SADA,CAENC,KAAK,CAAE,SAFD,CAGNC,IAAI,CAAE,4EAHA,CAAV,EAKA,MAAK+B,mBAAL,CAAyB,MAAKD,KAAL,CAAWjD,WAApC,EACAmD,UAAU,CAAC,UAAM,CACb,MAAKC,YAAL,GACH,CAFS,CAEP,IAFO,CAAV,CAGH,CAVD,IAWK,CACD5D,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,UAFD,CAGNC,IAAI,CAAE,8DAHA,CAAV,EAKH,CACJ,CA3BL,EA4BKmB,KA5BL,CA4BW,SAAA3C,CAAC,CAAI,CAAEiD,OAAO,CAACC,GAAR,CAAY,kDAAZ,CAAgElD,CAAhE,EAAoE,CA5BtF,EA6BH,CApCD,IAqCK,CACDH,IAAI,CAACwB,IAAL,CAAU,CACNC,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,UAFD,CAGNC,IAAI,CAAE,8DAHA,CAAV,EAKH,CACJ,CAlKa,OAmKd+B,mBAnKc,CAmKQ,SAACG,QAAD,CAAc,IACxBpD,CAAAA,SADwB,CACWoD,QADX,CACxBpD,SADwB,CACbG,QADa,CACWiD,QADX,CACbjD,QADa,CACHK,SADG,CACW4C,QADX,CACH5C,SADG,CAEhC,GAAM6C,CAAAA,UAAU,CAAG,CAAErD,SAAS,CAATA,SAAF,CAAaG,QAAQ,CAARA,QAAb,CAAuBK,SAAS,CAATA,SAAvB,CAAnB,CACA8C,cAAc,CAACC,OAAf,CAAuB,SAAvB,CAAkC7B,IAAI,CAACC,SAAL,CAAe0B,UAAf,CAAlC,EACH,CAvKa,OAwKdF,YAxKc,CAwKC,UAAM,CACjBK,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,uBAAxB,EACH,CA1Ka,OA4KdC,SA5Kc,CA4KH,SAACjE,CAAD,CAAK,CAEZ,GAAIiB,CAAAA,OAAO,CAAG,+BAAd,CACA,GAAIC,CAAAA,KAAK,CAAGD,OAAO,CAACE,IAAR,CAAanB,CAAC,CAACkE,MAAF,CAAS1D,KAAtB,CAAZ,CACA,GAAGU,KAAH,CAAS,CAAC,MAAKF,QAAL,CAAc,CAACmD,aAAa,CAAC,IAAf,CAAsBC,cAAc,CAAC,KAArC,CAAd,EACT,CADD,IAEI,CACJ,MAAKpD,QAAL,CAAc,CAACmD,aAAa,CAAC,KAAf,CAAuBC,cAAc,CAAC,IAAtC,CAAd,EACC,CAEJ,CAtLa,CAEV,MAAKd,KAAL,CAAa,CACTe,QAAQ,CAAE,KADD,CAEThE,WAAW,CAAE,EAFJ,CAGTkC,WAAW,CAAE,EAHJ,CAIT+B,KAAK,CAAE,IAJE,CAKTH,aAAa,CAAC,KALL,CAMTC,cAAc,CAAC,KANN,CAAb,CAFU,aAWb,C,mEA6KQ,CAEL,GAAI,KAAKd,KAAL,CAAWN,QAAf,CAAyB,CACrB,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACI,qDACI,4BAAM,EAAE,CAAC,aAAT,CAAuB,MAAM,CAAE,KAAKM,KAAL,CAAWe,QAA1C,eAEI,6BAAO,SAAS,CAAC,cAAjB,eAFJ,cAGI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,IAAI,CAAC,MAApC,EAHJ,cAKI,6BAAO,SAAS,CAAC,cAAjB,cALJ,cAMI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,IAAI,CAAC,MAApC,EANJ,cAQI,6BAAO,SAAS,CAAC,cAAjB,cARJ,cASI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,MAAtB,CAA6B,IAAI,CAAC,MAAlC,EATJ,cAWI,6BAAO,SAAS,CAAC,cAAjB,WAXJ,cAYI,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,IAAI,CAAC,OAApC,CAA4C,QAAQ,CAAE,KAAKJ,SAA3D,EADJ,cAEI,4BAAM,SAAS,CAAC,UAAhB,eAA4B,yBAAG,MAAM,CAAG,CAAE,KAAKX,KAAL,CAAWc,cAAzB,CAAyC,SAAS,CAAC,gCAAnD,EAA5B,cAAoH,yBAAG,MAAM,CAAG,CAAE,KAAKd,KAAL,CAAWa,aAAzB,CAAwC,SAAS,CAAC,+BAAlD,EAApH,CAFJ,CAZJ,cAiBI,6BAAO,SAAS,CAAC,cAAjB,aAjBJ,cAkBI,6BAAO,IAAI,CAAC,WAAZ,CAAwB,EAAE,CAAC,WAA3B,CAAuC,IAAI,CAAC,UAA5C,EAlBJ,cAoBI,8BAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,KAAKpE,UAAhD,YApBJ,CADJ,CADJ,CAgCH,C,6BA/NyBJ,S,EAiO9B,cAAeG,CAAAA,eAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport Swal from 'sweetalert2';\n\nclass TeacherRegister extends Component {\n    constructor() {\n        super();\n        this.state = {\n            verified: false,\n            teacherData: {},\n            hashedToken: '',\n            route: null,\n            showTrueSignE:false,\n            showFalseSignE:false,\n\n        }\n    }\n    newTeacher = (e) => {\n        e.preventDefault();\n        let formTeacher = document.getElementById('formTeacher');\n        let teacherData = {\n            firstName: formTeacher.fname.value,\n            lastName: formTeacher.lname.value,\n            email: formTeacher.email.value,\n            password: formTeacher.tpassword.value,\n            id_number: formTeacher.t_id.value,\n        }\n        this.setState({ teacherData });\n\n        // this.clearForm() ;\n\n        let pattern = /^\\d*[A-Za-z]+\\w*@zu.edu.jo$/ig;\n        let regex = pattern.test(teacherData.email) ;\n        // let regex = true;\n        if(regex){\n            if (teacherData.firstName && teacherData.lastName && teacherData.password && teacherData.id_number && teacherData.email) {\n                this.storeTeacherDataInDB(teacherData);\n            }\n            else {\n                Swal.fire({\n                    icon: 'warning',\n                    title: 'Hmmm ..',\n                    html: '<h5 class=\"text-warning font-lobster mt-2\">All fields are required</h5>',\n                })\n            }\n        }\n        else {\n            Swal.fire({\n                icon: 'error',\n                title: 'Oops..',\n                html: '<h5 class=\"text-warning font-lobster mt-2\">Email is not valid!</h5>',\n            })\n        }\n    }\n\n    storeTeacherDataInDB = (teacherData) => {\n        let { email, id_number } = teacherData;\n        let bodyData = { email, id_number };\n        let baseUrl = document.getElementById('baseUrl').defaultValue;\n        fetch(`${baseUrl}/teachers`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(bodyData),\n        })\n            .then(res => res.json())\n            .then(res => {\n\n                if (res === 'Teacher Is Already Exist.') {\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Oops ...',\n                        html: '<h5 class=\"text-danger font-lobster mt-2\">Teacher Email or ID is already exist</h5>',\n                    })\n                }\n                else {\n                    let start = res.indexOf('token:'); //5\n                    if (start !== -1) {\n                        let hashedToken = res.slice(6);\n                        this.setState({ hashedToken });\n                        Swal.fire({\n                            title: '<h3 class=\"font-acme\">Enter the verification code sent to your email :</3>',\n                            icon: 'question',\n                            iconHtml: 'ØŸ',\n                            html: '<input type=\"text\" id=\"token\" class=\"form-control text-center\" placeholder=\"Verification Code\" name=\"token\"/>',\n                        }).then(() => {\n                            this.saveTeacher();\n                        });\n                    }\n                    else {\n                        Swal.fire({\n                            icon: 'error',\n                            title: 'Oops ...',\n                            html: '<h5 class=\"text-danger font-lobster mt-2\">Something wrong , pleaase try again later</h5>',\n                        })\n                    }\n                }\n            })\n            .catch(\"error during send Teacher data to backend\");\n    };\n\n    clearForm = () => {\n        document.getElementById('fname').value = \"\";\n        document.getElementById('lname').value = \"\";\n        document.getElementById('t_id').value = \"\";\n        document.getElementById('tpassword').value = \"\";\n    }\n\n    handleClose = (e) => {\n        this.setState({\n            show: false\n        });\n    }\n\n    done = (e) => {\n        this.setState({\n            redirect: true\n        });\n    }\n    saveTeacher = () => {\n        console.log(\"Hello world!!\");\n        let token = document.getElementById('token').value;\n        if (token) {\n            let teacherData = Object.assign({}, this.state.teacherData);\n            let { hashedToken } = this.state;\n            teacherData.hashedToken = hashedToken;\n            teacherData.token = token;\n            console.log(teacherData, \" <= teacher data.  \");\n            let baseUrl = document.getElementById('baseUrl').defaultValue;\n            fetch(`${baseUrl}/teacherRegister`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(teacherData),\n            })\n                .then(res => res.json())\n                .then(res => {\n                    if (res === 'Teacher Added Successfully') {\n                        Swal.fire({\n                            icon: 'success',\n                            title: 'Success',\n                            html: '<h5 class=\"text-success font-lobster mt-2\">Teacher Added Successfully</h5>',\n                        })\n                        this.storedUserInSession(this.state.teacherData);\n                        setTimeout(() => {\n                            this.goToHomePage();\n                        }, 2000);\n                    }\n                    else {\n                        Swal.fire({\n                            icon: 'error',\n                            title: 'Oops ..!',\n                            html: '<h5 class=\"text-danger font-lobster mt-2\">Invalid Token</h5>',\n                        })\n                    }\n                })\n                .catch(e => { console.log(\"error when storing teacher data with the tokens.\", e) });\n        }\n        else {\n            Swal.fire({\n                icon: 'error',\n                title: 'Oops ..!',\n                html: '<h5 class=\"text-danger font-lobster mt-2\">Invalid Token</h5>',\n            })\n        }\n    }\n    storedUserInSession = (userData) => {\n        const { firstName, lastName, id_number } = userData;\n        const storedData = { firstName, lastName, id_number };\n        sessionStorage.setItem('teacher', JSON.stringify(storedData));\n    }\n    goToHomePage = () => {\n        window.location.replace(\"http://localhost:3000\");\n    }\n\n    checkMail =(e)=>{\n\n        let pattern = /^\\d*[A-Za-z]+\\w*@zu.edu.jo$/ig;\n        let regex = pattern.test(e.target.value) ;\n        if(regex){this.setState({showTrueSignE:true , showFalseSignE:false});\n        }\n        else{\n        this.setState({showTrueSignE:false , showFalseSignE:true});\n        }\n        \n    }\n\n    render() {\n\n        if (this.state.redirect) {\n            return <Redirect to='/' />;\n        }\n\n        return (\n            <>\n                <form id=\"formTeacher\" hidden={this.state.verified}>\n\n                    <label className=\"label-title \">First Name</label>\n                    <input name=\"fname\" id=\"fname\" type=\"text\" />\n\n                    <label className=\"label-title \">Last Name</label>\n                    <input name=\"lname\" id=\"lname\" type=\"text\" />\n\n                    <label className=\"label-title \">ID Number</label>\n                    <input name=\"t_id\" id=\"t_id\" type=\"text\" />\n\n                    <label className=\"label-title \">E-MAIL</label>\n                    <div className=\"contSigns\">\n                        <input name=\"email\" id=\"email\" type=\"email\" onChange={this.checkMail} />\n                        <span className=\"spanSign\" ><i hidden={ ! this.state.showFalseSignE} className=\" fas fa-exclamation errorSign \"></i><i hidden={ ! this.state.showTrueSignE} className=\"far fa-check-circle checkSign\"></i></span>\n                    </div>\n\n                    <label className=\"label-title \">PASSWORD</label>\n                    <input name=\"tpassword\" id=\"tpassword\" type=\"password\" />\n\n                    <button className=\"mt4 my-button\" onClick={this.newTeacher} >Sign Up</button>\n\n                </form>\n\n\n\n\n\n            </>\n        );\n    }\n}\nexport default TeacherRegister;"]},"metadata":{},"sourceType":"module"}